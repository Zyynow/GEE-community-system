2024-03-31 10:16:08.496  INFO 35384 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 35384 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:16:08.499 DEBUG 35384 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:16:08.500  INFO 35384 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:16:08.528  INFO 35384 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:16:08.529  INFO 35384 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:16:09.064  INFO 35384 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:16:09.135  INFO 35384 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 63 ms. Found 5 JPA repository interfaces.
2024-03-31 10:16:09.726  INFO 35384 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:16:09.736  INFO 35384 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:16:09.736  INFO 35384 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:16:09.823  INFO 35384 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:16:09.823  INFO 35384 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1294 ms
2024-03-31 10:16:09.966  INFO 35384 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:16:10.013  INFO 35384 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:16:10.132  INFO 35384 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:16:10.208  INFO 35384 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:16:10.506  INFO 35384 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:16:10.522  INFO 35384 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:16:11.114  INFO 35384 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:16:11.118  INFO 35384 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:16:11.901  WARN 35384 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:16:12.083  INFO 35384 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:16:12.376  INFO 35384 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:16:12.406  INFO 35384 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:16:12.414  INFO 35384 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.325 seconds (JVM running for 5.154)
2024-03-31 10:17:37.347  INFO 35384 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:17:37.355  INFO 35384 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:17:37.366  INFO 35384 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:17:41.206  INFO 30064 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 30064 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:17:41.207 DEBUG 30064 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:17:41.207  INFO 30064 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:17:41.233  INFO 30064 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:17:41.233  INFO 30064 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:17:41.645  INFO 30064 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:17:41.697  INFO 30064 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 5 JPA repository interfaces.
2024-03-31 10:17:42.121  INFO 30064 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:17:42.128  INFO 30064 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:17:42.129  INFO 30064 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:17:42.184  INFO 30064 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:17:42.185  INFO 30064 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 951 ms
2024-03-31 10:17:42.291  INFO 30064 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:17:42.311  INFO 30064 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:17:42.393  INFO 30064 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:17:42.454  INFO 30064 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:17:42.657  INFO 30064 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:17:42.669  INFO 30064 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:17:43.249  INFO 30064 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:17:43.255  INFO 30064 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:17:44.103  WARN 30064 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:17:44.271  INFO 30064 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:17:44.574  INFO 30064 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:17:44.616  INFO 30064 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:17:44.624  INFO 30064 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.721 seconds (JVM running for 4.4)
2024-03-31 10:18:33.548  INFO 30064 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:18:33.557  INFO 30064 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:18:33.616  INFO 30064 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:20:44.207  INFO 22988 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 22988 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:20:44.207 DEBUG 22988 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:20:44.208  INFO 22988 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:20:44.229  INFO 22988 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:20:44.229  INFO 22988 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:20:44.628  INFO 22988 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:20:44.685  INFO 22988 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2024-03-31 10:20:45.105  INFO 22988 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:20:45.111  INFO 22988 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:20:45.112  INFO 22988 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:20:45.168  INFO 22988 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:20:45.169  INFO 22988 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 939 ms
2024-03-31 10:20:45.276  INFO 22988 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:20:45.298  INFO 22988 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:20:45.379  INFO 22988 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:20:45.433  INFO 22988 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:20:45.614  INFO 22988 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:20:45.625  INFO 22988 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:20:46.149  INFO 22988 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:20:46.154  INFO 22988 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:20:46.819  WARN 22988 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:20:47.018  INFO 22988 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:20:47.285  INFO 22988 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:20:47.313  INFO 22988 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:20:47.320  INFO 22988 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.424 seconds (JVM running for 4.149)
2024-03-31 10:21:03.859  INFO 22988 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 10:21:03.861  INFO 22988 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 10:21:03.863  INFO 22988 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-03-31 10:21:04.185  WARN 22988 --- [http-nio-8080-exec-1] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [300] milliseconds.
2024-03-31 10:21:04.803  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 10:21:04.815  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 10:21:04.816  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:21:05.166  INFO 22988 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@4c95ace2, org.apache.catalina.connector.ResponseFacade@f6ebfa7]}
2024-03-31 10:21:05.556  INFO 22988 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 10:21:05.557  INFO 22988 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:21:10.326  INFO 22988 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@f6ebfa7, hyf, hyfhsy, m3zm, org.apache.catalina.session.StandardSessionFacade@375de180, {}]}
2024-03-31 10:21:10.359 DEBUG 22988 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 10:21:10.365 DEBUG 22988 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 10:21:10.376 DEBUG 22988 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 10:21:10.380  INFO 22988 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 10:21:10.380  INFO 22988 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:21:10.402  INFO 22988 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 10:21:10.485  WARN 22988 --- [http-nio-8080-exec-8] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 10:21:10.496  INFO 22988 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 10:21:10.496  INFO 22988 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:21:19.983  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:21:19.988  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:21:19.989  INFO 22988 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:25:46.974  INFO 22988 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:25:46.977  INFO 22988 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:25:46.985  INFO 22988 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:25:49.851  INFO 13564 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 13564 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:25:49.851 DEBUG 13564 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:25:49.852  INFO 13564 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:25:49.875  INFO 13564 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:25:49.875  INFO 13564 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:25:50.350  INFO 13564 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:25:50.411  INFO 13564 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2024-03-31 10:25:50.903  INFO 13564 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:25:50.909  INFO 13564 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:25:50.910  INFO 13564 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:25:50.976  INFO 13564 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:25:50.976  INFO 13564 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1099 ms
2024-03-31 10:25:51.115  INFO 13564 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:25:51.146  INFO 13564 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:25:51.225  INFO 13564 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:25:51.282  INFO 13564 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:25:51.505  INFO 13564 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:25:51.517  INFO 13564 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:25:52.100  INFO 13564 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:25:52.105  INFO 13564 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:25:52.864  WARN 13564 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:25:53.093  INFO 13564 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:25:53.393  INFO 13564 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:25:53.430  INFO 13564 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:25:53.439  INFO 13564 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.976 seconds (JVM running for 4.919)
2024-03-31 10:26:25.307  INFO 13564 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:26:25.310  INFO 13564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:26:25.318  INFO 13564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:26:28.170  INFO 35504 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 35504 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:26:28.172 DEBUG 35504 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:26:28.172  INFO 35504 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:26:28.197  INFO 35504 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:26:28.197  INFO 35504 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:26:28.642  INFO 35504 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:26:28.704  INFO 35504 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2024-03-31 10:26:29.143  INFO 35504 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:26:29.152  INFO 35504 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:26:29.152  INFO 35504 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:26:29.214  INFO 35504 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:26:29.214  INFO 35504 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1017 ms
2024-03-31 10:26:29.318  INFO 35504 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:26:29.339  INFO 35504 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:26:29.419  INFO 35504 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:26:29.472  INFO 35504 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:26:29.672  INFO 35504 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:26:29.687  INFO 35504 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:26:30.192  INFO 35504 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:26:30.198  INFO 35504 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:26:30.888  WARN 35504 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:26:31.069  INFO 35504 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:26:31.354  INFO 35504 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:26:31.388  INFO 35504 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:26:31.397  INFO 35504 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.544 seconds (JVM running for 4.335)
2024-03-31 10:26:49.271  INFO 35504 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 10:26:49.273  INFO 35504 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 10:26:49.274  INFO 35504 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 10:26:50.847  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 10:26:50.859  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 10:26:50.860  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:51.170  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@7709f618, org.apache.catalina.connector.ResponseFacade@38f204d8]}
2024-03-31 10:26:51.511  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 10:26:51.511  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:55.218  INFO 35504 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@38f204d8, hyf, hyfhsy, 4mqq, org.apache.catalina.session.StandardSessionFacade@71e2c327, {}]}
2024-03-31 10:26:55.219  INFO 35504 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : redirect:/login
2024-03-31 10:26:55.219  INFO 35504 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:55.241  INFO 35504 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 10:26:55.242  INFO 35504 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 10:26:55.242  INFO 35504 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:55.286  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@54aae4fe, org.apache.catalina.connector.ResponseFacade@5a6d001b]}
2024-03-31 10:26:55.293  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 10:26:55.293  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:59.602  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@5a6d001b, hyf, hyfhsy, 3j4u, org.apache.catalina.session.StandardSessionFacade@71e2c327, {}]}
2024-03-31 10:26:59.633 DEBUG 35504 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 10:26:59.639 DEBUG 35504 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 10:26:59.650 DEBUG 35504 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 10:26:59.654  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 10:26:59.655  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:26:59.670  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 10:26:59.750  WARN 35504 --- [http-nio-8080-exec-2] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 10:26:59.764  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 10:26:59.764  INFO 35504 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:27:03.754  INFO 35504 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@71e2c327]}
2024-03-31 10:27:03.760 DEBUG 35504 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:27:03.761 DEBUG 35504 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:27:03.764 DEBUG 35504 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:27:03.765  INFO 35504 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:27:03.769  INFO 35504 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:27:07.107  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:27:07.108  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:27:07.108  INFO 35504 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:27:07.123 ERROR 35504 --- [http-nio-8080-exec-1] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-1] Exception processing template "friends": An error happened during template parsing (template: "class path resource [templates/friends.html]")

org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.attoparser.ParseException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 48 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 50 common frames omitted

2024-03-31 10:27:07.125 ERROR 35504 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/dev] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")] with root cause

org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)

2024-03-31 10:27:07.141 ERROR 35504 --- [http-nio-8080-exec-1] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/dev/friend/] and exception [An error happened during template parsing (template: "class path resource [templates/friends.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
2024-03-31 10:27:44.468  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:27:44.468  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:27:44.468  INFO 35504 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:27:44.473 ERROR 35504 --- [http-nio-8080-exec-7] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-7] Exception processing template "friends": An error happened during template parsing (template: "class path resource [templates/friends.html]")

org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.attoparser.ParseException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 48 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 50 common frames omitted

2024-03-31 10:27:44.474 ERROR 35504 --- [http-nio-8080-exec-7] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/dev] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")] with root cause

org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)

2024-03-31 10:27:44.485 ERROR 35504 --- [http-nio-8080-exec-7] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/dev/friend/] and exception [An error happened during template parsing (template: "class path resource [templates/friends.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
2024-03-31 10:27:54.090  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:27:54.090  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:27:54.090  INFO 35504 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:27:54.094 ERROR 35504 --- [http-nio-8080-exec-9] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-9] Exception processing template "friends": An error happened during template parsing (template: "class path resource [templates/friends.html]")

org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.attoparser.ParseException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 48 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 50 common frames omitted

2024-03-31 10:27:54.095 ERROR 35504 --- [http-nio-8080-exec-9] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/dev] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/friends.html]")] with root cause

org.thymeleaf.exceptions.TemplateProcessingException: Could not parse as expression: "/lib/semantic/semantic.min.js" (template: "friends" - line 332, col 54)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:131)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:62)
	at org.thymeleaf.standard.expression.StandardExpressionParser.parseExpression(StandardExpressionParser.java:44)
	at org.thymeleaf.engine.EngineEventUtils.parseAttributeExpression(EngineEventUtils.java:220)
	at org.thymeleaf.engine.EngineEventUtils.computeAttributeExpression(EngineEventUtils.java:207)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:125)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlCDATAContentElement.handleOpenElementEnd(HtmlCDATAContentElement.java:104)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)

2024-03-31 10:27:54.101 ERROR 35504 --- [http-nio-8080-exec-9] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [/dev/friend/] and exception [An error happened during template parsing (template: "class path resource [templates/friends.html]")] as the response has already been committed. As a result, the response may have the wrong status code.
2024-03-31 10:28:37.973  INFO 35504 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:28:37.976  INFO 35504 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:28:37.985  INFO 35504 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:28:41.063  INFO 22516 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 22516 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:28:41.064 DEBUG 22516 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:28:41.064  INFO 22516 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:28:41.092  INFO 22516 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:28:41.092  INFO 22516 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:28:41.590  INFO 22516 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:28:41.648  INFO 22516 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2024-03-31 10:28:42.209  INFO 22516 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:28:42.217  INFO 22516 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:28:42.217  INFO 22516 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:28:42.284  INFO 22516 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:28:42.284  INFO 22516 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1191 ms
2024-03-31 10:28:42.407  INFO 22516 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:28:42.435  INFO 22516 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:28:42.518  INFO 22516 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:28:42.577  INFO 22516 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:28:42.947  INFO 22516 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:28:42.967  INFO 22516 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:28:43.607  INFO 22516 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:28:43.614  INFO 22516 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:28:44.468  WARN 22516 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:28:44.657  INFO 22516 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:28:44.925  INFO 22516 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:28:44.956  INFO 22516 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:28:44.963  INFO 22516 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.256 seconds (JVM running for 5.098)
2024-03-31 10:29:26.131  INFO 22516 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 10:29:26.131  INFO 22516 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 10:29:26.132  INFO 22516 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 10:29:27.349  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 10:29:27.357  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 10:29:27.357  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:27.589  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@31963ea6, org.apache.catalina.connector.ResponseFacade@65b1c7dc]}
2024-03-31 10:29:27.799  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 10:29:27.799  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:31.775  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@65b1c7dc, hyf, hyfhsy, o01i, org.apache.catalina.session.StandardSessionFacade@6258fd0d, {}]}
2024-03-31 10:29:31.805 DEBUG 22516 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 10:29:31.811 DEBUG 22516 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 10:29:31.823 DEBUG 22516 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 10:29:31.831  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 10:29:31.831  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:31.854  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 10:29:31.935  WARN 22516 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 10:29:31.948  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 10:29:31.948  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:41.455  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:29:41.477  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:29:41.477  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:41.778  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:29:41.778  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:29:41.778  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:29:41.778  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:29:41.781 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 10:29:41.782 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 10:29:41.783 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 10:29:41.783 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 10:29:41.783 DEBUG 22516 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 10:29:41.783 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:29:41.783 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 10:29:41.784 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:29:41.784 DEBUG 22516 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 10:29:41.787 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:29:41.788  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:41.789 ERROR 22516 --- [http-nio-8080-exec-7] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/count, Exception : nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.
2024-03-31 10:29:41.790  WARN 22516 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.]
2024-03-31 10:29:41.787  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:29:41.793  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:41.793 DEBUG 22516 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 10:29:41.795  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 10:29:41.795  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:29:41.785  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=卡夫卡, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 10:29:41.797  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:36:02.704  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/2', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[2, {}]}
2024-03-31 10:36:02.708 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 10:36:02.709 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 2(Long)
2024-03-31 10:36:02.711 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 10:36:02.712 DEBUG 22516 --- [http-nio-8080-exec-8] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 10:36:02.712 DEBUG 22516 --- [http-nio-8080-exec-8] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 2(Long), 2(Long)
2024-03-31 10:36:02.716 DEBUG 22516 --- [http-nio-8080-exec-8] c.j.d.F.findJoinForumsByUserId           : <==      Total: 2
2024-03-31 10:36:02.741  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 10:36:02.741  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:42:23.325  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[null]}
2024-03-31 10:42:23.328 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 10:42:23.329 DEBUG 22516 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: null, null, null, null, null, null
2024-03-31 10:42:23.383  INFO 22516 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:42:23.384 ERROR 22516 --- [http-nio-8080-exec-8] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/search, Exception : 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"
                               OR nickname LIKE "%" null "%") OR user2i' at line 23
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\UserMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT DISTINCT u.id    AS user_id,                         u.username,                         u.avatar,                         u.nickname,                         u.signature,                         CASE                              WHEN u.id IN (f.user1id, f.user2id) THEN                                 1                             ELSE 0                             END AS is_friend,                         CASE                              WHEN u.id = 1 THEN                                 1                             ELSE 0                             END AS is_me          FROM t_user AS u                  LEFT JOIN (SELECT DISTINCT user1id,                                             user2id                             FROM t_friend                             WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%"                                OR nickname LIKE "%" ? "%") OR user2id IN                                   (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f         ON u.id IN (f.user1id, f.user2id)         WHERE u.username LIKE "%" ? "%"            OR u.nickname LIKE "%" ? "%"
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"
                               OR nickname LIKE "%" null "%") OR user2i' at line 23
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"
                               OR nickname LIKE "%" null "%") OR user2i' at line 23
2024-03-31 10:42:23.384  WARN 22516 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"<EOL>                               OR nickname LIKE "%" null "%") OR user2i' at line 23<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\UserMapper.xml]<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT DISTINCT u.id    AS user_id,                         u.username,                         u.avatar,                         u.nickname,                         u.signature,                         CASE                              WHEN u.id IN (f.user1id, f.user2id) THEN                                 1                             ELSE 0                             END AS is_friend,                         CASE                              WHEN u.id = 1 THEN                                 1                             ELSE 0                             END AS is_me          FROM t_user AS u                  LEFT JOIN (SELECT DISTINCT user1id,                                             user2id                             FROM t_friend                             WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%"                                OR nickname LIKE "%" ? "%") OR user2id IN                                   (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f         ON u.id IN (f.user1id, f.user2id)         WHERE u.username LIKE "%" ? "%"            OR u.nickname LIKE "%" ? "%"<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"<EOL>                               OR nickname LIKE "%" null "%") OR user2i' at line 23<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'null "%"<EOL>                               OR nickname LIKE "%" null "%") OR user2i' at line 23]
2024-03-31 10:43:15.275  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:43:15.276  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:43:15.276  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:43:15.582  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:43:15.582  INFO 22516 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:43:15.583 DEBUG 22516 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 10:43:15.583  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:43:15.583 DEBUG 22516 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:43:15.584 DEBUG 22516 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 10:43:15.584 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 10:43:15.584  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:43:15.584 DEBUG 22516 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:43:15.584 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 10:43:15.585 DEBUG 22516 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 10:43:15.585 DEBUG 22516 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 10:43:15.586  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:43:15.586 DEBUG 22516 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:43:15.586 DEBUG 22516 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 10:43:15.586 ERROR 22516 --- [http-nio-8080-exec-3] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/count, Exception : nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.
2024-03-31 10:43:15.586  WARN 22516 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.]
2024-03-31 10:43:15.586  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:43:15.587  INFO 22516 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:43:15.586  INFO 22516 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=卡夫卡, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 10:43:15.587  INFO 22516 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:43:15.587 DEBUG 22516 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 10:43:15.587  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 10:43:15.588  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:00.955  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:49:00.956  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:49:00.956  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:01.231  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:01.231  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:01.232 DEBUG 22516 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:49:01.232 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 10:49:01.232 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 10:49:01.232 DEBUG 22516 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:49:01.233  INFO 22516 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:01.234 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 10:49:01.234  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:01.234 DEBUG 22516 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:49:01.234 DEBUG 22516 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 10:49:01.234  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 10:49:01.234 DEBUG 22516 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 10:49:01.234  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:01.234  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:49:01.234  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:01.234 DEBUG 22516 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 10:49:01.235 DEBUG 22516 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 10:49:01.235  INFO 22516 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:01.236 ERROR 22516 --- [http-nio-8080-exec-1] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/count, Exception : nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.
2024-03-31 10:49:01.236  WARN 22516 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.]
2024-03-31 10:49:01.239 DEBUG 22516 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 10:49:01.240  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 10:49:01.240  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:10.435  INFO 22516 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/2', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[2, {}]}
2024-03-31 10:49:10.436 DEBUG 22516 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 10:49:10.436 DEBUG 22516 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 2(Long)
2024-03-31 10:49:10.439 DEBUG 22516 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 10:49:10.440 DEBUG 22516 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 10:49:10.440 DEBUG 22516 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 2(Long), 2(Long)
2024-03-31 10:49:10.442 DEBUG 22516 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : <==      Total: 2
2024-03-31 10:49:10.449  INFO 22516 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 10:49:10.450  INFO 22516 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:16.888  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:16.889 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 10:49:16.890 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 10:49:16.893 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 10:49:16.893  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 10:49:16.893  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:49:19.315  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:49:19.316 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 10:49:19.316 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 10:49:19.319 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 10:49:19.320  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 10:49:19.320  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:09.332  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:53:09.333  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:53:09.333  INFO 22516 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:09.549  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:53:09.549  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:53:09.549  INFO 22516 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:53:09.549  INFO 22516 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 10:53:09.550 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:53:09.551 DEBUG 22516 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 10:53:09.551 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:53:09.551 DEBUG 22516 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 10:53:09.551  INFO 22516 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:09.551 ERROR 22516 --- [http-nio-8080-exec-2] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/count, Exception : nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.
2024-03-31 10:53:09.551  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 10:53:09.551  INFO 22516 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:09.551  WARN 22516 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: A query was run and no Result Maps were found for the Mapped Statement 'com.jxufe.dao.FriendMapper.getCount'.  It's likely that neither a Result Type nor a Result Map was specified.]
2024-03-31 10:53:09.551  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:53:09.551  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:09.553 DEBUG 22516 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 10:53:09.553  INFO 22516 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 10:53:09.553  INFO 22516 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:53:16.804  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:53:16.806 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 10:53:16.806 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 10:53:16.807 DEBUG 22516 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 10:53:16.808  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 10:53:16.808  INFO 22516 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:54:34.534  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[5, {}]}
2024-03-31 10:54:34.537 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 10:54:34.538 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 10:54:34.541 DEBUG 22516 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 10:54:34.542 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 10:54:34.542 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 5(Long), 5(Long)
2024-03-31 10:54:34.544 DEBUG 22516 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : <==      Total: 0
2024-03-31 10:54:34.546  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 10:54:34.546  INFO 22516 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:54:44.159  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@6258fd0d]}
2024-03-31 10:54:44.160 DEBUG 22516 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 10:54:44.160 DEBUG 22516 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 10:54:44.161 DEBUG 22516 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 10:54:44.161  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 10:54:44.162  INFO 22516 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:54:51.384  INFO 22516 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:54:51.386  INFO 22516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 10:54:51.395  INFO 22516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 10:58:19.386  INFO 2832 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 2832 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 10:58:19.387 DEBUG 2832 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 10:58:19.387  INFO 2832 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 10:58:19.413  INFO 2832 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 10:58:19.413  INFO 2832 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 10:58:19.836  INFO 2832 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 10:58:19.893  INFO 2832 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2024-03-31 10:58:20.312  INFO 2832 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 10:58:20.318  INFO 2832 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 10:58:20.318  INFO 2832 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 10:58:20.372  INFO 2832 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 10:58:20.373  INFO 2832 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 960 ms
2024-03-31 10:58:20.474  INFO 2832 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 10:58:20.495  INFO 2832 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 10:58:20.571  INFO 2832 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 10:58:20.626  INFO 2832 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 10:58:20.829  INFO 2832 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 10:58:20.839  INFO 2832 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 10:58:21.350  INFO 2832 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 10:58:21.355  INFO 2832 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 10:58:22.001  WARN 2832 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 10:58:22.172  INFO 2832 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 10:58:22.433  INFO 2832 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 10:58:22.464  INFO 2832 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 10:58:22.470  INFO 2832 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.394 seconds (JVM running for 4.08)
2024-03-31 10:58:31.014  INFO 2832 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 10:58:31.015  INFO 2832 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 10:58:31.016  INFO 2832 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 10:58:32.090  INFO 2832 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 10:58:32.100  INFO 2832 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 10:58:32.100  INFO 2832 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:58:32.424  INFO 2832 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@38ecfd61, org.apache.catalina.connector.ResponseFacade@51f34630]}
2024-03-31 10:58:32.729  INFO 2832 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 10:58:32.729  INFO 2832 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:58:42.206  INFO 2832 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@51f34630, hyf, hyfhsy, co3g, org.apache.catalina.session.StandardSessionFacade@3bebb246, {}]}
2024-03-31 10:58:42.237 DEBUG 2832 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 10:58:42.244 DEBUG 2832 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 10:58:42.255 DEBUG 2832 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 10:58:42.259  INFO 2832 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 10:58:42.259  INFO 2832 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:58:42.282  INFO 2832 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 10:58:42.360  WARN 2832 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 10:58:42.371  INFO 2832 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 10:58:42.371  INFO 2832 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:58:49.235  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:58:49.237  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:58:49.237  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:59:22.791  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 10:59:22.792  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 10:59:22.792  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:59:23.052  INFO 2832 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3bebb246]}
2024-03-31 10:59:23.052  INFO 2832 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3bebb246]}
2024-03-31 10:59:23.052  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3bebb246]}
2024-03-31 10:59:23.052  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3bebb246]}
2024-03-31 10:59:23.056 DEBUG 2832 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 10:59:23.056 DEBUG 2832 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 10:59:23.056 DEBUG 2832 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 10:59:23.056 DEBUG 2832 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 10:59:23.056 DEBUG 2832 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 10:59:23.057 DEBUG 2832 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 10:59:23.057 DEBUG 2832 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 10:59:23.057 DEBUG 2832 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 10:59:23.058 DEBUG 2832 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 10:59:23.058 DEBUG 2832 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 10:59:23.058 DEBUG 2832 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 10:59:23.058 DEBUG 2832 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 10:59:23.059  INFO 2832 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 10:59:23.059  INFO 2832 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:59:23.059  INFO 2832 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 10:59:23.059  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 10:59:23.073  INFO 2832 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:59:23.073  INFO 2832 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 10:59:23.059  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 10:59:23.077  INFO 2832 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:07:38.657  INFO 2832 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 11:07:38.660  INFO 2832 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 11:07:38.668  INFO 2832 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 11:07:42.771  INFO 28580 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 28580 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 11:07:42.771 DEBUG 28580 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 11:07:42.771  INFO 28580 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 11:07:42.797  INFO 28580 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 11:07:42.797  INFO 28580 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 11:07:43.217  INFO 28580 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 11:07:43.271  INFO 28580 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2024-03-31 11:07:43.667  INFO 28580 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 11:07:43.673  INFO 28580 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 11:07:43.673  INFO 28580 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 11:07:43.725  INFO 28580 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 11:07:43.725  INFO 28580 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 927 ms
2024-03-31 11:07:43.836  INFO 28580 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 11:07:43.857  INFO 28580 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 11:07:43.932  INFO 28580 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 11:07:43.986  INFO 28580 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 11:07:44.177  INFO 28580 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 11:07:44.188  INFO 28580 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 11:07:44.694  INFO 28580 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 11:07:44.700  INFO 28580 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 11:07:45.403  WARN 28580 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 11:07:45.572  INFO 28580 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 11:07:45.850  INFO 28580 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 11:07:45.881  INFO 28580 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 11:07:45.887  INFO 28580 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.421 seconds (JVM running for 4.11)
2024-03-31 11:07:59.645  INFO 28580 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 11:07:59.646  INFO 28580 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 11:07:59.647  INFO 28580 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2024-03-31 11:08:00.802  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 11:08:00.811  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 11:08:00.812  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:01.099  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@1cf031fe, org.apache.catalina.connector.ResponseFacade@3a7a4c8e]}
2024-03-31 11:08:01.432  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 11:08:01.432  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:05.080  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@3a7a4c8e, hyf, hyfhsy, 3ago, org.apache.catalina.session.StandardSessionFacade@21f95191, {}]}
2024-03-31 11:08:05.113 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 11:08:05.119 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 11:08:05.128 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 11:08:05.134  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 11:08:05.134  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:05.158  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 11:08:05.239  WARN 28580 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 11:08:05.249  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 11:08:05.250  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:13.624  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:08:13.629 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:08:13.630 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:08:13.632 DEBUG 28580 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:08:13.633  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:08:13.639  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:23.506  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 11:08:23.507  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 11:08:23.508  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:23.687  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:08:23.688 DEBUG 28580 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:08:23.688  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:08:23.688  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:08:23.688  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:08:23.689 DEBUG 28580 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:08:23.692 DEBUG 28580 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:08:23.692 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:08:23.692 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:08:23.692 DEBUG 28580 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 11:08:23.693 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:08:23.693 DEBUG 28580 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 11:08:23.693  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:08:23.693  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:23.693 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:08:23.695 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:08:23.695 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:08:23.695  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:08:23.695 DEBUG 28580 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 11:08:23.695  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:23.695  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 11:08:23.697  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:08:23.695  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:08:23.707  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:10:47.204  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 11:10:47.204  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 11:10:47.204  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:10:47.315  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:10:47.315  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:10:47.315  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:10:47.315  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:10:47.316 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:10:47.317 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 11:10:47.317 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:10:47.317 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:10:47.318 DEBUG 28580 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:10:47.318 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:10:47.318  INFO 28580 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:11:05.341  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡]}
2024-03-31 11:11:05.342 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 11:11:05.344 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 11:11:05.347 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 11:11:05.348  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 11:11:05.355  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:23.409  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/1', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[1, {}]}
2024-03-31 11:13:23.413 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 11:13:23.414 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 1(Long)
2024-03-31 11:13:23.416 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 11:13:23.417 DEBUG 28580 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 11:13:23.417 DEBUG 28580 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:13:23.421 DEBUG 28580 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : <==      Total: 4
2024-03-31 11:13:23.442  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 11:13:23.442  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:46.006  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 11:13:46.006  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 11:13:46.006  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:46.237  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:13:46.237  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:13:46.237  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:13:46.238 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:13:46.238 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:13:46.238 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:13:46.238 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:13:46.240 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:13:46.244  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:13:46.238 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:13:46.246 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:13:46.246 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 11:13:46.246  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:13:46.246  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:46.246 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:13:46.246 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 11:13:46.247 DEBUG 28580 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:13:46.247  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:13:46.247  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:46.248  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:13:46.248  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:13:46.249 DEBUG 28580 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 11:13:46.249  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 11:13:46.250  INFO 28580 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:22:26.111  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:22:26.111  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:22:26.111  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@21f95191]}
2024-03-31 11:22:26.113 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:22:26.113 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:22:26.113 DEBUG 28580 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:22:26.113 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:22:26.114 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:22:26.114 DEBUG 28580 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:22:26.115 DEBUG 28580 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:22:26.115 DEBUG 28580 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:22:26.116  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:22:26.116  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:22:26.117  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:22:26.117  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:22:26.117 DEBUG 28580 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:22:26.117  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:22:26.118  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:22:26.150  INFO 28580 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@450c0755]}
2024-03-31 11:22:26.159 DEBUG 28580 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 11:22:26.160 DEBUG 28580 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 11:22:26.161 DEBUG 28580 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 11:22:26.162 DEBUG 28580 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 11:22:26.162 DEBUG 28580 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), (String), 1(Long), 5(Long), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 11:22:26.235  INFO 28580 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:22:26.237 ERROR 28580 --- [http-nio-8080-exec-8] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/add, Exception : 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]
### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline
### The error occurred while setting parameters
### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
2024-03-31 11:22:26.237  WARN 28580 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: <EOL><EOL>### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]<EOL><EOL>### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);<EOL><EOL>### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL>; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)]
2024-03-31 11:55:55.204  WARN 28580 --- [http-nio-8080-exec-1] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [222] milliseconds.
2024-03-31 11:55:56.771  INFO 28580 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 11:55:56.772  INFO 28580 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 11:55:56.772  INFO 28580 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:55:56.823  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@6646cfe8, org.apache.catalina.connector.ResponseFacade@7154b5f0]}
2024-03-31 11:55:56.832  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 11:55:56.832  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:16.178  INFO 28580 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@7154b5f0, hyf, hyfhsy, 7zgo, org.apache.catalina.session.StandardSessionFacade@472b6a9b, {}]}
2024-03-31 11:56:16.180 DEBUG 28580 --- [http-nio-8080-exec-8] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 11:56:16.181 DEBUG 28580 --- [http-nio-8080-exec-8] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 11:56:16.182 DEBUG 28580 --- [http-nio-8080-exec-8] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 11:56:16.184  INFO 28580 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 11:56:16.184  INFO 28580 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:16.194  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 11:56:16.209  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 11:56:16.209  INFO 28580 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:25.587  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@472b6a9b]}
2024-03-31 11:56:25.588 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:56:25.589 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:56:25.591 DEBUG 28580 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:56:25.592  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:56:25.592  INFO 28580 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:29.430  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 11:56:29.431  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 11:56:29.431  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:29.620  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@472b6a9b]}
2024-03-31 11:56:29.620  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@472b6a9b]}
2024-03-31 11:56:29.620  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@472b6a9b]}
2024-03-31 11:56:29.620  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@472b6a9b]}
2024-03-31 11:56:29.622 DEBUG 28580 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:56:29.622 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:56:29.622 DEBUG 28580 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 11:56:29.622 DEBUG 28580 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:56:29.623 DEBUG 28580 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:56:29.623 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:56:29.623 DEBUG 28580 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:56:29.623 DEBUG 28580 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 11:56:29.624 DEBUG 28580 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:56:29.624 DEBUG 28580 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:56:29.624 DEBUG 28580 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:56:29.624 DEBUG 28580 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 11:56:29.624  INFO 28580 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:57:46.958  INFO 28580 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 11:57:46.961  INFO 28580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 11:57:46.968  INFO 28580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 11:57:51.863  INFO 21184 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 21184 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 11:57:51.864 DEBUG 21184 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 11:57:51.864  INFO 21184 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 11:57:51.887  INFO 21184 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 11:57:51.887  INFO 21184 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 11:57:52.328  INFO 21184 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 11:57:52.377  INFO 21184 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 43 ms. Found 5 JPA repository interfaces.
2024-03-31 11:57:52.802  INFO 21184 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 11:57:52.809  INFO 21184 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 11:57:52.809  INFO 21184 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 11:57:52.865  INFO 21184 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 11:57:52.865  INFO 21184 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 978 ms
2024-03-31 11:57:52.990  INFO 21184 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 11:57:53.017  INFO 21184 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 11:57:53.098  INFO 21184 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 11:57:53.151  INFO 21184 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 11:57:53.355  INFO 21184 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 11:57:53.365  INFO 21184 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 11:57:53.867  INFO 21184 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 11:57:53.872  INFO 21184 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 11:57:54.574  WARN 21184 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 11:57:54.760  INFO 21184 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 11:57:55.043  INFO 21184 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 11:57:55.078  INFO 21184 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 11:57:55.087  INFO 21184 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.545 seconds (JVM running for 4.307)
2024-03-31 11:59:16.253  INFO 21184 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 11:59:16.255  INFO 21184 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 11:59:16.256  INFO 21184 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 11:59:22.495  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 11:59:22.507  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 11:59:22.508  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:22.824  INFO 21184 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@5af4d195, org.apache.catalina.connector.ResponseFacade@74c288a9]}
2024-03-31 11:59:23.129  INFO 21184 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 11:59:23.130  INFO 21184 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:29.346  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@74c288a9, hyf, hyfhsy, ms87, org.apache.catalina.session.StandardSessionFacade@73e130cc, {}]}
2024-03-31 11:59:29.347  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/login
2024-03-31 11:59:29.347  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:29.373  INFO 21184 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 11:59:29.374  INFO 21184 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 11:59:29.374  INFO 21184 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:29.416  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@714be14e, org.apache.catalina.connector.ResponseFacade@7f8c0117]}
2024-03-31 11:59:29.424  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 11:59:29.424  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:33.469  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@7f8c0117, hyf, hyfhsy, 364g, org.apache.catalina.session.StandardSessionFacade@73e130cc, {}]}
2024-03-31 11:59:33.499 DEBUG 21184 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 11:59:33.504 DEBUG 21184 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 11:59:33.514 DEBUG 21184 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 11:59:33.519  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 11:59:33.519  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:33.531  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 11:59:33.611  WARN 21184 --- [http-nio-8080-exec-2] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 11:59:33.624  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 11:59:33.624  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:35.752  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 11:59:35.756  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 11:59:35.757  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:36.027  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 11:59:36.028  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 11:59:36.030 DEBUG 21184 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 11:59:36.030 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 11:59:36.030 DEBUG 21184 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 11:59:36.030 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 11:59:36.030  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 11:59:36.030  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 11:59:36.032 DEBUG 21184 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 11:59:36.033 DEBUG 21184 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 11:59:36.033 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 11:59:36.033 DEBUG 21184 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 11:59:36.033 DEBUG 21184 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 11:59:36.033 DEBUG 21184 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 11:59:36.034 DEBUG 21184 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 11:59:36.034  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 11:59:36.035  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:36.035 DEBUG 21184 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 11:59:36.035  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 11:59:36.034  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 11:59:36.046  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:36.046  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 11:59:36.034  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 11:59:36.050  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:28.685  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 12:03:28.686  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 12:03:28.686  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:28.959  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:03:28.959  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:03:28.959  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:03:28.959  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:03:28.961 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:03:28.961 DEBUG 21184 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:03:28.961 DEBUG 21184 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 12:03:28.961 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:03:28.962 DEBUG 21184 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:03:28.962 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:03:28.962 DEBUG 21184 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 12:03:28.962 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:03:28.962 DEBUG 21184 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:03:28.963 DEBUG 21184 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:28.963 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:03:28.963 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:28.963  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:40.059  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡]}
2024-03-31 12:03:40.061 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:03:40.061 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 12:03:40.063 DEBUG 21184 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:03:40.065  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 12:03:40.069  INFO 21184 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:52.952  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L.]}
2024-03-31 12:03:52.954 DEBUG 21184 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:03:52.954 DEBUG 21184 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L.(String), L.(String), L.(String), L.(String), L.(String), L.(String)
2024-03-31 12:03:52.956 DEBUG 21184 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:03:52.957  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 12:03:52.957  INFO 21184 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:59.268  INFO 21184 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=5, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 12:03:59 CST 2024), org.apache.catalina.connector.ResponseFacade@7f8c0117]}
2024-03-31 12:03:59.270 DEBUG 21184 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar apply_time) values (?, ?, ?, ?, ?)
2024-03-31 12:03:59.272  INFO 21184 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:03:59.273 ERROR 21184 --- [http-nio-8080-exec-4] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/apply/add, Exception : nested exception is org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'sender_id' in 'class com.jxufe.entity.Apply'
2024-03-31 12:03:59.273  WARN 21184 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'sender_id' in 'class com.jxufe.entity.Apply']
2024-03-31 12:06:07.168  INFO 21184 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[5, {}]}
2024-03-31 12:06:07.173 DEBUG 21184 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 12:06:07.173 DEBUG 21184 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 12:06:07.174 DEBUG 21184 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 12:06:07.175 DEBUG 21184 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 12:06:07.176 DEBUG 21184 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 5(Long), 5(Long)
2024-03-31 12:06:07.178 DEBUG 21184 --- [http-nio-8080-exec-10] c.j.d.F.findJoinForumsByUserId           : <==      Total: 0
2024-03-31 12:06:07.186  INFO 21184 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 12:06:07.186  INFO 21184 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:06:29.962  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:06:29.962  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:06:29.962  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@73e130cc]}
2024-03-31 12:06:29.963 DEBUG 21184 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:06:29.963 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:06:29.963 DEBUG 21184 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:06:29.963 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:06:29.964 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:06:29.964 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:06:29.964 DEBUG 21184 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:06:29.964 DEBUG 21184 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:06:29.964  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:06:29.966  INFO 21184 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:06:29.966  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:06:29.966  INFO 21184 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:06:29.966 DEBUG 21184 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:06:29.968  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:06:29.968  INFO 21184 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:06:29.966  INFO 21184 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@74c288a9]}
2024-03-31 12:06:29.976 DEBUG 21184 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 12:06:29.976 DEBUG 21184 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 12:06:29.980 DEBUG 21184 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 12:06:29.981 DEBUG 21184 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 12:06:29.982 DEBUG 21184 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), (String), 1(Long), 5(Long), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 12:06:30.047  INFO 21184 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:06:30.061 ERROR 21184 --- [http-nio-8080-exec-3] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/add, Exception : 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]
### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline
### The error occurred while setting parameters
### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
2024-03-31 12:06:30.062  WARN 21184 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: <EOL><EOL>### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]<EOL><EOL>### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);<EOL><EOL>### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL>; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)]
2024-03-31 12:06:33.147  INFO 21184 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 12:06:33.151  INFO 21184 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 12:06:33.164  INFO 21184 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 12:14:15.105  INFO 26252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 26252 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 12:14:15.106 DEBUG 26252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 12:14:15.106  INFO 26252 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 12:14:15.130  INFO 26252 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 12:14:15.130  INFO 26252 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 12:14:15.525  INFO 26252 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 12:14:15.582  INFO 26252 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2024-03-31 12:14:15.984  INFO 26252 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 12:14:15.990  INFO 26252 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 12:14:15.991  INFO 26252 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 12:14:16.049  INFO 26252 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 12:14:16.049  INFO 26252 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 918 ms
2024-03-31 12:14:16.162  INFO 26252 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 12:14:16.183  INFO 26252 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 12:14:16.260  INFO 26252 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 12:14:16.310  INFO 26252 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 12:14:16.500  INFO 26252 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 12:14:16.510  INFO 26252 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 12:14:17.021  INFO 26252 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 12:14:17.027  INFO 26252 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 12:14:17.686  WARN 26252 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 12:14:17.870  INFO 26252 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 12:14:18.144  INFO 26252 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 12:14:18.176  INFO 26252 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 12:14:18.182  INFO 26252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.375 seconds (JVM running for 4.067)
2024-03-31 12:14:21.854  INFO 26252 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 12:14:21.856  INFO 26252 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 12:14:21.856  INFO 26252 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2024-03-31 12:14:22.946  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 12:14:22.953  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 12:14:22.953  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:23.193  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@7b21ea5c, org.apache.catalina.connector.ResponseFacade@1c470b5c]}
2024-03-31 12:14:23.406  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 12:14:23.407  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:30.452  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@1c470b5c, hyf, hyfhsy, o7vf, org.apache.catalina.session.StandardSessionFacade@d105efd, {}]}
2024-03-31 12:14:30.483 DEBUG 26252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 12:14:30.489 DEBUG 26252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 12:14:30.499 DEBUG 26252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 12:14:30.505  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 12:14:30.505  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:30.526  INFO 26252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 12:14:30.607  WARN 26252 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 12:14:30.618  INFO 26252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 12:14:30.619  INFO 26252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:38.579  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 12:14:38.581  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 12:14:38.582  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:38.903  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:14:38.903  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:14:38.903  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:14:38.903  INFO 26252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:14:38.906 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:14:38.906 DEBUG 26252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:14:38.906 DEBUG 26252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:14:38.906 DEBUG 26252 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 12:14:38.907 DEBUG 26252 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 12:14:38.907 DEBUG 26252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:14:38.907 DEBUG 26252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:14:38.907 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:14:38.909 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:14:38.909 DEBUG 26252 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 12:14:38.909 DEBUG 26252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:14:38.909 DEBUG 26252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:14:38.910  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:14:38.910  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:38.910  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 12:14:38.910  INFO 26252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:14:38.924  INFO 26252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:38.924  INFO 26252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:38.910  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:14:38.927  INFO 26252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:53.551  INFO 26252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 12:14:53.553 DEBUG 26252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:14:53.553 DEBUG 26252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 12:14:53.556 DEBUG 26252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:14:53.556  INFO 26252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 12:14:53.563  INFO 26252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:55.606  INFO 26252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=5, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 12:14:55 CST 2024), org.apache.catalina.connector.ResponseFacade@20d8a080]}
2024-03-31 12:14:55.608 DEBUG 26252 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar apply_time) values (?, ?, ?, ?, ?)
2024-03-31 12:14:55.610 DEBUG 26252 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==> Parameters: 1(Long), 5(Long), L.(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 2024-03-31 12:14:55.568(Timestamp)
2024-03-31 12:14:55.660  INFO 26252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:14:55.662 ERROR 26252 --- [http-nio-8080-exec-1] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/apply/add, Exception : 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)
        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]
### The error may involve com.jxufe.dao.FriendMapper.addApply-Inline
### The error occurred while setting parameters
### SQL: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar apply_time)         values (?, ?, ?, ?, ?)
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)
        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)
        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1
2024-03-31 12:14:55.664  WARN 26252 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)<EOL>        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]<EOL><EOL>### The error may involve com.jxufe.dao.FriendMapper.addApply-Inline<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar apply_time)         values (?, ?, ?, ?, ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)<EOL>        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'apply_time)<EOL>        values (1, 5, 'L.', 'https://sky-take-out-kafka.oss-cn-beiji' at line 1]
2024-03-31 12:15:32.028  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:15:32.028  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:15:32.028  INFO 26252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@d105efd]}
2024-03-31 12:15:32.030 DEBUG 26252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:15:32.030 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:15:32.030 DEBUG 26252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:15:32.030 DEBUG 26252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:15:32.030 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:15:32.031 DEBUG 26252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:15:32.031 DEBUG 26252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:15:32.031  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:15:32.031  INFO 26252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:15:32.031 DEBUG 26252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:15:32.031 DEBUG 26252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:15:32.032  INFO 26252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:15:32.032  INFO 26252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:15:32.032  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:15:32.032  INFO 26252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:15:32.031  INFO 26252 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@20d8a080]}
2024-03-31 12:15:32.040 DEBUG 26252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 12:15:32.040 DEBUG 26252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 12:15:32.042 DEBUG 26252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 12:15:32.042 DEBUG 26252 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 12:15:32.043 DEBUG 26252 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), (String), 1(Long), 5(Long), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 12:15:32.051  INFO 26252 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:15:32.110 ERROR 26252 --- [http-nio-8080-exec-10] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/add, Exception : 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]
### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline
### The error occurred while setting parameters
### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
2024-03-31 12:15:32.110  WARN 26252 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: <EOL><EOL>### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]<EOL><EOL>### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);<EOL><EOL>### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL>; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)]
2024-03-31 12:16:25.065  INFO 26252 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 12:16:25.067  INFO 26252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 12:16:25.075  INFO 26252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 12:16:28.693  INFO 24776 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 24776 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 12:16:28.694 DEBUG 24776 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 12:16:28.695  INFO 24776 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 12:16:28.719  INFO 24776 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 12:16:28.719  INFO 24776 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 12:16:29.182  INFO 24776 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 12:16:29.232  INFO 24776 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 45 ms. Found 5 JPA repository interfaces.
2024-03-31 12:16:29.728  INFO 24776 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 12:16:29.734  INFO 24776 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 12:16:29.734  INFO 24776 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 12:16:29.803  INFO 24776 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 12:16:29.803  INFO 24776 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1083 ms
2024-03-31 12:16:29.934  INFO 24776 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 12:16:29.966  INFO 24776 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 12:16:30.052  INFO 24776 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 12:16:30.106  INFO 24776 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 12:16:30.321  INFO 24776 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 12:16:30.332  INFO 24776 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 12:16:30.864  INFO 24776 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 12:16:30.870  INFO 24776 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 12:16:31.601  WARN 24776 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 12:16:31.778  INFO 24776 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 12:16:32.067  INFO 24776 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 12:16:32.100  INFO 24776 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 12:16:32.109  INFO 24776 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.761 seconds (JVM running for 4.543)
2024-03-31 12:17:22.893  INFO 24776 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 12:17:22.895  INFO 24776 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 12:17:22.896  INFO 24776 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 12:17:23.496  INFO 24776 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 12:17:23.504  INFO 24776 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 12:17:23.504  INFO 24776 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:23.737  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@2b27f152, org.apache.catalina.connector.ResponseFacade@49c2c75f]}
2024-03-31 12:17:23.955  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 12:17:23.955  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:29.007  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@49c2c75f, hyf, hyfhsy, qdyo, org.apache.catalina.session.StandardSessionFacade@39b0e9d, {}]}
2024-03-31 12:17:29.041 DEBUG 24776 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 12:17:29.048 DEBUG 24776 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 12:17:29.058 DEBUG 24776 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 12:17:29.063  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 12:17:29.063  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:29.087  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 12:17:29.182  WARN 24776 --- [http-nio-8080-exec-4] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 12:17:29.195  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 12:17:29.195  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:31.601  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 12:17:31.607  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 12:17:31.608  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:31.922  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:31.924  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:31.924  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:31.924  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:31.934 DEBUG 24776 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:17:31.934 DEBUG 24776 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:17:31.934 DEBUG 24776 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:17:31.936 DEBUG 24776 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:17:31.936 DEBUG 24776 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:17:31.936 DEBUG 24776 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:17:31.936 DEBUG 24776 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 12:17:31.937 DEBUG 24776 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 12:17:31.937 DEBUG 24776 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:17:31.937 DEBUG 24776 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:17:31.938 DEBUG 24776 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:17:31.938 DEBUG 24776 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 12:17:31.938  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:17:31.939  INFO 24776 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:31.938  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 12:17:31.938  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:17:31.953  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:31.953  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:31.938  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:17:31.958  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:47.398  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:47.399 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 12:17:47.400 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 12:17:47.402 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 12:17:47.402  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 12:17:47.403  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:17:50.960  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:17:50.961 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 12:17:50.962 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 12:17:50.964 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 12:17:50.965  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 12:17:50.965  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:04.155  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:18:04.156 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 12:18:04.157 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 12:18:04.159 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 12:18:04.159  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 12:18:04.160  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:20.773  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 12:18:20.775 DEBUG 24776 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:18:20.775 DEBUG 24776 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 12:18:20.778 DEBUG 24776 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:18:20.778  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 12:18:20.785  INFO 24776 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:30.766  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[Kafak]}
2024-03-31 12:18:30.767 DEBUG 24776 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:18:30.768 DEBUG 24776 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: Kafak(String), Kafak(String), Kafak(String), Kafak(String), Kafak(String), Kafak(String)
2024-03-31 12:18:30.769 DEBUG 24776 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 0
2024-03-31 12:18:30.770  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 12:18:30.770  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:36.340  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡]}
2024-03-31 12:18:36.341 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:18:36.341 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 12:18:36.343 DEBUG 24776 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:18:36.343  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 12:18:36.343  INFO 24776 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:40.164  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 12:18:40.165 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 12:18:40.166 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 12:18:40.168 DEBUG 24776 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 12:18:40.168  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 12:18:40.169  INFO 24776 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:18:42.185  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=5, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 12:18:42 CST 2024), org.apache.catalina.connector.ResponseFacade@49c2c75f]}
2024-03-31 12:18:42.187 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar, apply_time) values (?, ?, ?, ?, ?)
2024-03-31 12:18:42.190 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==> Parameters: 1(Long), 5(Long), L.(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 2024-03-31 12:18:42.149(Timestamp)
2024-03-31 12:18:42.263 DEBUG 24776 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : <==    Updates: 1
2024-03-31 12:18:42.263  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 12:18:42.263  INFO 24776 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:21:00.768  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 12:21:00.770  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 12:21:00.770  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:21:01.050  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:21:01.050  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:21:01.050  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:21:01.050  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@39b0e9d]}
2024-03-31 12:21:01.051 DEBUG 24776 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 12:21:01.051 DEBUG 24776 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 12:21:01.051 DEBUG 24776 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 12:21:01.051 DEBUG 24776 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 12:21:01.052 DEBUG 24776 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 12:21:01.052 DEBUG 24776 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 12:21:01.053 DEBUG 24776 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 12:21:01.053 DEBUG 24776 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 12:21:01.053 DEBUG 24776 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 12:21:01.054 DEBUG 24776 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 12:21:01.054  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 12:21:01.054  INFO 24776 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:21:01.056  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 12:21:01.056 DEBUG 24776 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 12:21:01.056  INFO 24776 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:21:01.056 DEBUG 24776 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 12:21:01.057  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 12:21:01.057  INFO 24776 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:21:01.057  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 12:21:01.057  INFO 24776 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 12:24:40.731  INFO 24776 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 12:24:40.733  INFO 24776 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 12:24:40.744  INFO 24776 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 15:01:08.558  INFO 33180 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 33180 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 15:01:08.561 DEBUG 33180 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 15:01:08.561  INFO 33180 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 15:01:08.583  INFO 33180 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 15:01:08.583  INFO 33180 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 15:01:08.964  INFO 33180 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 15:01:09.015  INFO 33180 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 5 JPA repository interfaces.
2024-03-31 15:01:09.429  INFO 33180 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 15:01:09.436  INFO 33180 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 15:01:09.436  INFO 33180 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 15:01:09.489  INFO 33180 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 15:01:09.489  INFO 33180 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 906 ms
2024-03-31 15:01:09.602  INFO 33180 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 15:01:09.624  INFO 33180 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 15:01:09.704  INFO 33180 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 15:01:09.758  INFO 33180 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 15:01:09.943  INFO 33180 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 15:01:09.954  INFO 33180 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 15:01:10.439  INFO 33180 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 15:01:10.445  INFO 33180 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:01:11.112  WARN 33180 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 15:01:11.268  INFO 33180 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 15:01:11.523  INFO 33180 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 15:01:11.560  INFO 33180 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 15:01:11.568  INFO 33180 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.304 seconds (JVM running for 4.044)
2024-03-31 15:01:21.937  INFO 33180 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 15:01:21.938  INFO 33180 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 15:01:21.940  INFO 33180 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 15:01:22.291  WARN 33180 --- [http-nio-8080-exec-1] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [334] milliseconds.
2024-03-31 15:01:23.325  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:01:23.338  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:01:23.338  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:23.658  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@639417b8, org.apache.catalina.connector.ResponseFacade@3be45b77]}
2024-03-31 15:01:23.996  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:01:23.996  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:31.081  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@3be45b77, hyf, hyfhsy, x9zs, org.apache.catalina.session.StandardSessionFacade@49c16fd3, {}]}
2024-03-31 15:01:31.112 DEBUG 33180 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 15:01:31.121 DEBUG 33180 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 15:01:31.134 DEBUG 33180 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 15:01:31.136  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 15:01:31.137  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:31.160  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 15:01:31.246  WARN 33180 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 15:01:31.257  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 15:01:31.257  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:42.182  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:01:42.186  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:01:42.186  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:42.533  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:01:42.533  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:01:42.533  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:01:42.533  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:01:42.536 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:01:42.536 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:01:42.536 DEBUG 33180 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:01:42.536 DEBUG 33180 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:01:42.537 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:01:42.537 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:01:42.537 DEBUG 33180 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:01:42.537 DEBUG 33180 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:01:42.538 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:01:42.539 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:01:42.539 DEBUG 33180 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:01:42.539 DEBUG 33180 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 15:01:42.539  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 15:01:42.540  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:42.539  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:01:42.539  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:01:42.552  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:42.552  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:01:42.539  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 15:01:42.555  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:03:25.896  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 15:03:25.898 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 15:03:25.898 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 15:03:25.901 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 15:03:25.902  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 15:03:25.908  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:03:30.094  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=5, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024), org.apache.catalina.connector.ResponseFacade@3be45b77]}
2024-03-31 15:03:30.096 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar, apply_time) values (?, ?, ?, ?, ?)
2024-03-31 15:03:30.099 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.addApply      : ==> Parameters: 1(Long), 5(Long), L.(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 2024-03-31 15:03:30.059(Timestamp)
2024-03-31 15:03:30.140 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.addApply      : <==    Updates: 1
2024-03-31 15:03:30.140  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:03:30.140  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:06:36.621  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:06:36.626 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:06:36.627 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:06:36.629 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:06:36.630 DEBUG 33180 --- [http-nio-8080-exec-7] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:06:36.630 DEBUG 33180 --- [http-nio-8080-exec-7] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:06:36.632 DEBUG 33180 --- [http-nio-8080-exec-7] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:06:36.645  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:06:36.645  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:08:10.800  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:08:10.800 DEBUG 33180 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:08:10.801 DEBUG 33180 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:08:10.803 DEBUG 33180 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:08:10.803  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:08:10.803  INFO 33180 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:08:16.334  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:08:16.335 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:08:16.335 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:08:16.336 DEBUG 33180 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:08:16.337  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:08:16.338  INFO 33180 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:08:25.690  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:08:25.691 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:08:25.691 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:08:25.694 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:08:25.695  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:08:25.695  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:08:39.651  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:08:39.652 DEBUG 33180 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:08:39.653 DEBUG 33180 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:08:39.656 DEBUG 33180 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:08:39.657  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:08:39.657  INFO 33180 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:09:26.812  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 15:09:26.813 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 15:09:26.814 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 15:09:26.817 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 15:09:26.818  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 15:09:26.818  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:12:18.080  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:12:18.082 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:12:18.082 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:12:18.083 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:12:18.084 DEBUG 33180 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:12:18.084 DEBUG 33180 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:12:18.087 DEBUG 33180 --- [http-nio-8080-exec-3] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:12:18.089  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:12:18.089  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:12:22.101  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:12:22.102 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:12:22.103 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:12:22.105 DEBUG 33180 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:12:22.106 DEBUG 33180 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:12:22.107 DEBUG 33180 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:12:22.108 DEBUG 33180 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:12:22.111  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:12:22.111  INFO 33180 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:12:25.072  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/2', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[2, {}]}
2024-03-31 15:12:25.074 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:12:25.074 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 2(Long)
2024-03-31 15:12:25.076 DEBUG 33180 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:12:25.077 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:12:25.077 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 2(Long), 2(Long)
2024-03-31 15:12:25.079 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.d.F.findJoinForumsByUserId           : <==      Total: 2
2024-03-31 15:12:25.088  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:12:25.088  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:12:27.521  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:12:27.523 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:12:27.523 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:12:27.524 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:12:27.525 DEBUG 33180 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:12:27.525 DEBUG 33180 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:12:27.527 DEBUG 33180 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:12:27.529  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:12:27.529  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:15:14.587  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:15:14.588 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:15:14.588 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:15:14.589 DEBUG 33180 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:15:14.590  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:15:14.590  INFO 33180 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:17:49.885  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:17:49.885  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:17:49.885  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@49c16fd3]}
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:17:49.886 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:17:49.887 DEBUG 33180 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:17:49.887  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 15:17:49.887 DEBUG 33180 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:17:49.887 DEBUG 33180 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 15:17:49.887  INFO 33180 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:17:49.887  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 15:17:49.887  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:17:49.888  INFO 33180 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:17:49.888  INFO 33180 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:17:49.887  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@7abb6a43]}
2024-03-31 15:17:49.896 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:17:49.896 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 15:17:49.898 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:17:49.899 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 15:17:49.900 DEBUG 33180 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), (String), 1(Long), 5(Long), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 15:17:49.934  INFO 33180 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:17:49.973 ERROR 33180 --- [http-nio-8080-exec-3] c.j.handler.ControllerExceptionHandler   : Request URL : http://localhost:8080/dev/friend/add, Exception : 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]
### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline
### The error occurred while setting parameters
### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)
2024-03-31 15:17:49.974  WARN 33180 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: <EOL><EOL>### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL><EOL>### The error may exist in file [D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes\com.jxufe.dao\FriendMapper.xml]<EOL><EOL>### The error may involve com.jxufe.dao.FriendMapper.saveFriend-Inline<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description,                               user1avatar, user2avatar, user1nickname, user2nickname)         values (?, ?, ?,                 ?, ?, ?, ?, ?, ?,                 ?);<EOL><EOL>### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)<EOL>; Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`2jd`.`t_friend`, CONSTRAINT `FK_user2_username` FOREIGN KEY (`user2username`) REFERENCES `t_user` (`username`) ON DELETE RESTRICT ON UPDATE RESTRICT)]
2024-03-31 15:19:26.019  INFO 33180 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:19:26.022  INFO 33180 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 15:19:26.029  INFO 33180 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 15:19:29.511  INFO 21968 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 21968 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 15:19:29.511 DEBUG 21968 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 15:19:29.512  INFO 21968 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 15:19:29.537  INFO 21968 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 15:19:29.537  INFO 21968 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 15:19:29.967  INFO 21968 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 15:19:30.031  INFO 21968 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58 ms. Found 5 JPA repository interfaces.
2024-03-31 15:19:30.454  INFO 21968 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 15:19:30.463  INFO 21968 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 15:19:30.463  INFO 21968 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 15:19:30.532  INFO 21968 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 15:19:30.532  INFO 21968 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 995 ms
2024-03-31 15:19:30.669  INFO 21968 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 15:19:30.702  INFO 21968 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 15:19:30.781  INFO 21968 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 15:19:30.838  INFO 21968 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 15:19:31.055  INFO 21968 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 15:19:31.065  INFO 21968 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 15:19:31.575  INFO 21968 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 15:19:31.580  INFO 21968 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:19:32.311  WARN 21968 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 15:19:32.562  INFO 21968 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 15:19:32.844  INFO 21968 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 15:19:32.879  INFO 21968 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 15:19:32.886  INFO 21968 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.67 seconds (JVM running for 4.332)
2024-03-31 15:20:11.914  INFO 21968 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 15:20:11.914  INFO 21968 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 15:20:11.915  INFO 21968 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 15:20:13.437  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:20:13.445  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:20:13.445  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:13.676  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@6bc255ee, org.apache.catalina.connector.ResponseFacade@1821a80f]}
2024-03-31 15:20:13.897  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:20:13.898  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:19.951  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@1821a80f, hyf, hyfhsy, rvcp, org.apache.catalina.session.StandardSessionFacade@3569f9b5, {}]}
2024-03-31 15:20:19.973 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 15:20:19.977 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 15:20:19.983 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 15:20:19.990  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 15:20:19.990  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:20.010  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 15:20:20.066  WARN 21968 --- [http-nio-8080-exec-4] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 15:20:20.074  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 15:20:20.074  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:25.323  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:20:25.325  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:20:25.325  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:25.701  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:20:25.701  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:20:25.701  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:20:25.701  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:20:25.704 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:20:25.706 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:20:25.706 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:20:25.706 DEBUG 21968 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:20:25.706 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 15:20:25.707  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 15:20:25.708  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:25.707  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:20:25.707  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:20:25.718  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:25.718  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:25.707  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 15:20:25.721  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:20:31.116  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:20:31.117 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:20:31.117 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:20:31.119 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:20:31.119  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:20:31.121  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:21:47.696  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:21:47.696  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:21:47.696  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:21:47.696 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:21:47.696 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:21:47.696 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:21:47.697 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:21:47.697 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:21:47.697 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:21:47.698 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:21:47.698 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 15:21:47.698 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:09:26 CST 2024)]
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:21:47.698  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:21:47.719  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@18167dfc]}
2024-03-31 15:21:47.725 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:21:47.726 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 15:21:47.727 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:21:47.728 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 15:21:47.729 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 15:21:47.730 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 15:21:47.731 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 15:21:47.731 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 1(Long)
2024-03-31 15:21:47.732 DEBUG 21968 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 15:21:47.732  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:21:47.732  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:22:21.521  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:22:21.521  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:22:21.521  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:22:21.741  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:22:21.741  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:22:21.742  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:22:21.742  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:22:21.742 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:22:21.742 DEBUG 21968 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:22:21.742 DEBUG 21968 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:22:21.742 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:22:21.743 DEBUG 21968 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:22:21.743 DEBUG 21968 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:22:21.743 DEBUG 21968 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:22:21.744 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 15:22:21.745 DEBUG 21968 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:22:21.745  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 15:22:21.745 DEBUG 21968 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:22:21.745 DEBUG 21968 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:22:21.745  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:22:21.745  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:22:21.745  INFO 21968 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:22:21.745  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:22:21.746  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:22:21.748 DEBUG 21968 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:22:21.749  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:22:21.750  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:24:26.648  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:24:26.650 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:24:26.651 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:24:26.653 DEBUG 21968 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:24:26.655  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:24:26.655  INFO 21968 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:09.506  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:28:09.506  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:28:09.506  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:09.770  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:28:09.770  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:28:09.770  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:28:09.770  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:28:09.771 DEBUG 21968 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:28:09.771 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:28:09.771 DEBUG 21968 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:28:09.771 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:28:09.773 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:28:09.773 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:28:09.773 DEBUG 21968 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:28:09.773 DEBUG 21968 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:28:09.774 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:28:09.774 DEBUG 21968 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:28:09.775 DEBUG 21968 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:28:09.775 DEBUG 21968 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:28:09.775  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:28:09.775  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:28:09.775  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:28:09.775  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:28:09.777  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:09.777  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:09.777  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:09.777  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:28:32.752  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:28:32.753 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:28:32.753 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:28:32.754 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:28:32.755  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:28:32.755  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:29:43.959  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 15:29:43.961 DEBUG 21968 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 15:29:43.962 DEBUG 21968 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 15:29:43.964 DEBUG 21968 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 15:29:43.964  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=true, isMe=false)]
2024-03-31 15:29:43.969  INFO 21968 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:36.175  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:30:36.176  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:30:36.176  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:36.458  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:30:36.458  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:30:36.458  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:30:36.458  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:30:36.459 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:30:36.459 DEBUG 21968 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:30:36.459 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:30:36.459 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:30:36.460 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:30:36.460 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:30:36.460 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:30:36.460 DEBUG 21968 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:30:36.460 DEBUG 21968 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:30:36.461 DEBUG 21968 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:30:36.461 DEBUG 21968 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:30:36.461 DEBUG 21968 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:30:36.461  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:30:42.248  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 15:30:42.249 DEBUG 21968 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 15:30:42.250 DEBUG 21968 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 15:30:42.252 DEBUG 21968 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 15:30:42.253  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=true, isMe=false)]
2024-03-31 15:30:42.253  INFO 21968 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:31:44.076  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[5, {}]}
2024-03-31 15:31:44.082 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:31:44.082 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 15:31:44.084 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:31:44.085 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:31:44.086 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 5(Long), 5(Long)
2024-03-31 15:31:44.087 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : <==      Total: 0
2024-03-31 15:31:44.098  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:31:44.099  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:31:57.052  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=5, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024), org.apache.catalina.connector.ResponseFacade@18167dfc]}
2024-03-31 15:31:57.053 DEBUG 21968 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar, apply_time) values (?, ?, ?, ?, ?)
2024-03-31 15:31:57.057 DEBUG 21968 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : ==> Parameters: 1(Long), 5(Long), L.(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 2024-03-31 15:31:57.038(Timestamp)
2024-03-31 15:31:57.103 DEBUG 21968 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.addApply      : <==    Updates: 1
2024-03-31 15:31:57.103  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:31:57.103  INFO 21968 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:32:43.807  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@3569f9b5]}
2024-03-31 15:32:43.808 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:32:43.808 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:32:43.809 DEBUG 21968 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:32:43.810  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:32:43.810  INFO 21968 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:32:45.789  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:32:45.790 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:32:45.790 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:32:45.791 DEBUG 21968 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:32:45.792 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:32:45.792 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:32:45.794 DEBUG 21968 --- [http-nio-8080-exec-6] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:32:45.796  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:32:45.797  INFO 21968 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:34:51.378  INFO 21968 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:34:51.381  INFO 21968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 15:34:51.391  INFO 21968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 15:34:54.339  INFO 23696 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 23696 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 15:34:54.340 DEBUG 23696 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 15:34:54.340  INFO 23696 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 15:34:54.363  INFO 23696 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 15:34:54.363  INFO 23696 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 15:34:54.794  INFO 23696 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 15:34:54.846  INFO 23696 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 5 JPA repository interfaces.
2024-03-31 15:34:55.309  INFO 23696 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 15:34:55.315  INFO 23696 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 15:34:55.315  INFO 23696 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 15:34:55.378  INFO 23696 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 15:34:55.378  INFO 23696 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1014 ms
2024-03-31 15:34:55.496  INFO 23696 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 15:34:55.524  INFO 23696 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 15:34:55.602  INFO 23696 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 15:34:55.657  INFO 23696 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 15:34:55.875  INFO 23696 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 15:34:55.887  INFO 23696 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 15:34:56.431  INFO 23696 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 15:34:56.438  INFO 23696 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:34:57.210  WARN 23696 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 15:34:57.460  INFO 23696 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 15:34:57.815  INFO 23696 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 15:34:57.855  INFO 23696 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 15:34:57.864  INFO 23696 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.833 seconds (JVM running for 4.627)
2024-03-31 15:35:01.104  INFO 23696 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 15:35:01.106  INFO 23696 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 15:35:01.107  INFO 23696 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 15:35:02.340  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:35:02.348  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:35:02.348  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:02.643  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@14aa7062, org.apache.catalina.connector.ResponseFacade@7e54073]}
2024-03-31 15:35:02.970  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:35:02.971  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:08.865  INFO 23696 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@7e54073, hyf, hyfhsy, uyiv, org.apache.catalina.session.StandardSessionFacade@77642d7, {}]}
2024-03-31 15:35:08.897 DEBUG 23696 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 15:35:08.905 DEBUG 23696 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 15:35:08.914 DEBUG 23696 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 15:35:08.919  INFO 23696 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 15:35:08.920  INFO 23696 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:08.942  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 15:35:09.026  WARN 23696 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 15:35:09.042  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 15:35:09.042  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:11.407  INFO 23696 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:35:11.411  INFO 23696 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:35:11.412  INFO 23696 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:11.627  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@77642d7]}
2024-03-31 15:35:11.627  INFO 23696 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@77642d7]}
2024-03-31 15:35:11.630  INFO 23696 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@77642d7]}
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:35:11.632  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@77642d7]}
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:35:11.632 DEBUG 23696 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:35:11.635 DEBUG 23696 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:35:11.635 DEBUG 23696 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:35:11.635 DEBUG 23696 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:35:11.635 DEBUG 23696 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:35:11.636 DEBUG 23696 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:35:11.636  INFO 23696 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:35:11.636  INFO 23696 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:11.638 DEBUG 23696 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:35:11.638  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:35:11.636  INFO 23696 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:35:11.650  INFO 23696 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:11.650  INFO 23696 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:11.636  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:35:11.654  INFO 23696 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:22.804  INFO 23696 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L]}
2024-03-31 15:35:22.805 DEBUG 23696 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = 1 THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 15:35:22.806 DEBUG 23696 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 15:35:22.808 DEBUG 23696 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 15:35:22.809  INFO 23696 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=true, isMe=false)]
2024-03-31 15:35:22.814  INFO 23696 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:35:41.531  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@77642d7]}
2024-03-31 15:35:41.532 DEBUG 23696 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:35:41.533 DEBUG 23696 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:35:41.535 DEBUG 23696 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:35:41.535  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:35:41.535  INFO 23696 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:37:58.647  INFO 23696 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:37:58.650  INFO 23696 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 15:37:58.658  INFO 23696 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 15:38:01.775  INFO 32172 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 32172 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 15:38:01.776 DEBUG 32172 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 15:38:01.776  INFO 32172 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 15:38:01.800  INFO 32172 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 15:38:01.800  INFO 32172 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 15:38:02.277  INFO 32172 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 15:38:02.335  INFO 32172 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2024-03-31 15:38:02.836  INFO 32172 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 15:38:02.845  INFO 32172 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 15:38:02.845  INFO 32172 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 15:38:02.917  INFO 32172 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 15:38:02.917  INFO 32172 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1116 ms
2024-03-31 15:38:03.046  INFO 32172 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 15:38:03.072  INFO 32172 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 15:38:03.147  INFO 32172 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 15:38:03.203  INFO 32172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 15:38:03.432  INFO 32172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 15:38:03.445  INFO 32172 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 15:38:04.026  INFO 32172 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 15:38:04.032  INFO 32172 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:38:04.837  WARN 32172 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 15:38:05.052  INFO 32172 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 15:38:05.379  INFO 32172 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 15:38:05.411  INFO 32172 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 15:38:05.419  INFO 32172 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.967 seconds (JVM running for 4.797)
2024-03-31 15:38:41.911  INFO 32172 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 15:38:41.912  INFO 32172 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 15:38:41.913  INFO 32172 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 15:38:42.470  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:38:42.482  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:38:42.483  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:42.787  INFO 32172 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@136db7bd, org.apache.catalina.connector.ResponseFacade@6238046b]}
2024-03-31 15:38:43.115  INFO 32172 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:38:43.115  INFO 32172 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:54.689  INFO 32172 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@6238046b, hyf, hyfhsy, xiyb, org.apache.catalina.session.StandardSessionFacade@2b767015, {}]}
2024-03-31 15:38:54.689  INFO 32172 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/login
2024-03-31 15:38:54.689  INFO 32172 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:54.713  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:38:54.713  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:38:54.714  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:54.758  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@2240df77, org.apache.catalina.connector.ResponseFacade@2c87354f]}
2024-03-31 15:38:54.765  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:38:54.765  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:58.060  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@2c87354f, hyf, hyfhsy, yew8, org.apache.catalina.session.StandardSessionFacade@2b767015, {}]}
2024-03-31 15:38:58.093 DEBUG 32172 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 15:38:58.099 DEBUG 32172 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 15:38:58.112 DEBUG 32172 --- [http-nio-8080-exec-1] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 15:38:58.117  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 15:38:58.117  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:38:58.132  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 15:38:58.211  WARN 32172 --- [http-nio-8080-exec-2] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 15:38:58.222  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 15:38:58.222  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:00.554  INFO 32172 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:39:00.557  INFO 32172 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:39:00.558  INFO 32172 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:00.868  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@2b767015]}
2024-03-31 15:39:00.868  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@2b767015]}
2024-03-31 15:39:00.868  INFO 32172 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@2b767015]}
2024-03-31 15:39:00.868  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@2b767015]}
2024-03-31 15:39:00.871 DEBUG 32172 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:39:00.871 DEBUG 32172 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:39:00.871 DEBUG 32172 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:39:00.871 DEBUG 32172 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:39:00.872 DEBUG 32172 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:39:00.872 DEBUG 32172 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:39:00.872 DEBUG 32172 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:39:00.872 DEBUG 32172 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:39:00.873 DEBUG 32172 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:39:00.873 DEBUG 32172 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:39:00.873 DEBUG 32172 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:39:00.873 DEBUG 32172 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:39:00.874  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:39:00.875  INFO 32172 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:00.874  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:39:00.889  INFO 32172 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:00.874  INFO 32172 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:39:00.891  INFO 32172 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:00.874  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:39:00.891  INFO 32172 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:39:05.685  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@2b767015]}
2024-03-31 15:39:05.686 DEBUG 32172 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:39:05.686 DEBUG 32172 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:39:05.688 DEBUG 32172 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:39:05.689  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:39:05.689  INFO 32172 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:03.045  INFO 32172 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:41:03.048  INFO 32172 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 15:41:03.056  INFO 32172 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 15:41:06.134  INFO 30904 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 30904 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 15:41:06.135 DEBUG 30904 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 15:41:06.135  INFO 30904 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 15:41:06.161  INFO 30904 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 15:41:06.161  INFO 30904 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 15:41:06.632  INFO 30904 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 15:41:06.697  INFO 30904 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58 ms. Found 5 JPA repository interfaces.
2024-03-31 15:41:07.181  INFO 30904 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 15:41:07.188  INFO 30904 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 15:41:07.188  INFO 30904 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 15:41:07.254  INFO 30904 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 15:41:07.254  INFO 30904 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1092 ms
2024-03-31 15:41:07.378  INFO 30904 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 15:41:07.406  INFO 30904 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 15:41:07.486  INFO 30904 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 15:41:07.543  INFO 30904 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 15:41:07.768  INFO 30904 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 15:41:07.781  INFO 30904 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 15:41:08.357  INFO 30904 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 15:41:08.363  INFO 30904 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:41:09.117  WARN 30904 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 15:41:09.340  INFO 30904 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 15:41:09.634  INFO 30904 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 15:41:09.670  INFO 30904 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 15:41:09.678  INFO 30904 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.897 seconds (JVM running for 4.836)
2024-03-31 15:41:26.137  INFO 30904 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 15:41:26.138  INFO 30904 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 15:41:26.139  INFO 30904 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 15:41:27.353  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 15:41:27.364  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 15:41:27.364  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:27.673  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@60a81939, org.apache.catalina.connector.ResponseFacade@78d1a265]}
2024-03-31 15:41:27.980  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:41:27.980  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:33.207  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@78d1a265, hyf, hyfhsy, dxic, org.apache.catalina.session.StandardSessionFacade@303c6129, {}]}
2024-03-31 15:41:33.237 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 15:41:33.245 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 15:41:33.254 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 15:41:33.260  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 15:41:33.260  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:33.284  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 15:41:33.367  WARN 30904 --- [http-nio-8080-exec-10] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 15:41:33.380  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 15:41:33.380  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:35.174  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:41:35.179  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:41:35.180  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:35.489  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:35.489  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:35.489  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:35.489  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:35.500 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:41:35.500 DEBUG 30904 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:41:35.500 DEBUG 30904 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:41:35.500 DEBUG 30904 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:41:35.501 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:41:35.501 DEBUG 30904 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:41:35.501 DEBUG 30904 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:41:35.501 DEBUG 30904 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:41:35.503 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:41:35.503 DEBUG 30904 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:41:35.503 DEBUG 30904 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:41:35.503 DEBUG 30904 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:41:35.504  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:41:35.505  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:35.504  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:41:35.504  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:41:35.518  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:35.518  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:35.504  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:41:35.524  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:38.409  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:38.410 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:41:38.410 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:41:38.413 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:41:38.414  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:41:38.414  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:48.125  INFO 30904 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:48.127  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:48.127  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:41:48.128 DEBUG 30904 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:41:48.129 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:41:48.129 DEBUG 30904 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:41:48.129 DEBUG 30904 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:41:48.129  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:41:48.129  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:48.130  INFO 30904 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:03:30 CST 2024)]
2024-03-31 15:41:48.130  INFO 30904 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:48.130  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:41:48.130  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:41:48.159  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@78d1a265]}
2024-03-31 15:41:48.170 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:41:48.170 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 15:41:48.171 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:41:48.172 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 15:41:48.173 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 15:41:48.179 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 15:41:48.180 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 15:41:48.180 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 1(Long)
2024-03-31 15:41:48.181 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 15:41:48.182  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:41:48.182  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:43:54.079  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:43:54.079  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:43:54.079  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:43:54.374  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:43:54.376 DEBUG 30904 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:43:54.377 DEBUG 30904 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:43:54.380  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:43:54.380  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:43:54.380  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:43:54.381 DEBUG 30904 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:43:54.381 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:43:54.381 DEBUG 30904 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:43:54.381 DEBUG 30904 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:43:54.381 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:43:54.382 DEBUG 30904 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 5
2024-03-31 15:43:54.382 DEBUG 30904 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:43:54.382 DEBUG 30904 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 15:43:54.382 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:43:54.382  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 15:43:54.382  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:43:54.382  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 5
2024-03-31 15:43:54.382  INFO 30904 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:43:54.382  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:43:54.384  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:43:54.384 DEBUG 30904 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:43:54.385  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:43:54.385  INFO 30904 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:44:05.940  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:44:05.942  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:44:05.942  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:44:06.192  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:44:06.192  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:44:06.193 DEBUG 30904 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:44:06.193 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:44:06.193 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:44:06.193 DEBUG 30904 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:44:06.194 DEBUG 30904 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 15:44:06.194  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:44:06.195  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 15:44:06.195  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:44:06.195 DEBUG 30904 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:44:06.195 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:44:06.195 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:44:06.195  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:44:06.197  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:44:06.197  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:44:06.200 DEBUG 30904 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:44:06.201 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:44:06.201 DEBUG 30904 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:44:06.202  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:44:06.202  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:44:06.204 DEBUG 30904 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:44:06.209  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:44:06.246  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:21.316  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 15:51:21.316  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 15:51:21.316  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:21.592  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:51:21.594 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 15:51:21.594  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:51:21.594  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:51:21.594  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:51:21.594 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:51:21.596 DEBUG 30904 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 15:51:21.597 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 15:51:21.597 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 15:51:21.597 DEBUG 30904 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:21.598 DEBUG 30904 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 15:51:21.598  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 15:51:21.599  INFO 30904 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:51:32.483  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:51:32.484 DEBUG 30904 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:51:32.485 DEBUG 30904 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:51:32.487 DEBUG 30904 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:51:32.488  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:51:32.489  INFO 30904 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:52:22.797  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:52:22.798 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 15:52:22.799 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 15:52:22.799  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5]}
2024-03-31 15:52:22.800  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 15:52:22.800  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:52:22.800 DEBUG 30904 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 15:52:22.800  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 15:52:22.801  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:52:22.804 ERROR 30904 --- [http-nio-8080-exec-8] org.thymeleaf.TemplateEngine             : [THYMELEAF][http-nio-8080-exec-8] Exception processing template "friend/delete/5": Error resolving template [friend/delete/5], template might not exist or might not be accessible by any of the configured Template Resolvers

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [friend/delete/5], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)

2024-03-31 15:52:22.806 ERROR 30904 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/dev] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: Error resolving template [friend/delete/5], template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause

org.thymeleaf.exceptions.TemplateInputException: Error resolving template [friend/delete/5], template might not exist or might not be accessible by any of the configured Template Resolvers
	at org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)
	at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)
	at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)

2024-03-31 15:57:15.246  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 15:57:15.250 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 15:57:15.250 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 15:57:15.252 DEBUG 30904 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 15:57:15.253 DEBUG 30904 --- [http-nio-8080-exec-9] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 15:57:15.253 DEBUG 30904 --- [http-nio-8080-exec-9] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 15:57:15.255 DEBUG 30904 --- [http-nio-8080-exec-9] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 15:57:15.267  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 15:57:15.267  INFO 30904 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:57:40.761  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:57:40.762 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:57:40.762 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:57:40.764 DEBUG 30904 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:57:40.764  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:57:40.765  INFO 30904 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:57:45.775  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:57:45.777 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:57:45.777 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:57:45.779 DEBUG 30904 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:57:45.780  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:57:45.780  INFO 30904 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:58:12.546  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@303c6129]}
2024-03-31 15:58:12.547 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 15:58:12.547 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 15:58:12.550 DEBUG 30904 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 15:58:12.550  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 15:58:12.551  INFO 30904 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 15:59:57.725  INFO 30904 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 15:59:57.727  INFO 30904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 15:59:57.735  INFO 30904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:00:01.348  INFO 5448 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 5448 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:00:01.349 DEBUG 5448 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:00:01.349  INFO 5448 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:00:01.376  INFO 5448 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:00:01.376  INFO 5448 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:00:01.763  INFO 5448 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:00:01.812  INFO 5448 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 45 ms. Found 5 JPA repository interfaces.
2024-03-31 16:00:02.236  INFO 5448 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:00:02.243  INFO 5448 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:00:02.243  INFO 5448 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:00:02.305  INFO 5448 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:00:02.306  INFO 5448 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 928 ms
2024-03-31 16:00:02.426  INFO 5448 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:00:02.460  INFO 5448 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:00:02.540  INFO 5448 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:00:02.601  INFO 5448 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:00:02.814  INFO 5448 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:00:02.824  INFO 5448 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:00:03.347  INFO 5448 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:00:03.353  INFO 5448 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:00:04.040  WARN 5448 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:00:04.217  INFO 5448 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:00:04.539  INFO 5448 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:00:04.574  INFO 5448 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:00:04.582  INFO 5448 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.537 seconds (JVM running for 4.207)
2024-03-31 16:00:08.895  INFO 5448 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:00:08.895  INFO 5448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:00:08.896  INFO 5448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 16:00:08.995  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:00:09.002  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:00:09.002  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:09.239  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@694abaa2, org.apache.catalina.connector.ResponseFacade@65788ceb]}
2024-03-31 16:00:09.454  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:00:09.454  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:15.129  INFO 5448 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@65788ceb, hyf, hyfhsy, mquz, org.apache.catalina.session.StandardSessionFacade@2b014042, {}]}
2024-03-31 16:00:15.160 DEBUG 5448 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:00:15.166 DEBUG 5448 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:00:15.176 DEBUG 5448 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:00:15.181  INFO 5448 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:00:15.181  INFO 5448 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:15.204  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:00:15.289  WARN 5448 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:00:15.302  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:00:15.303  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:20.061  INFO 5448 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:00:20.065  INFO 5448 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:00:20.067  INFO 5448 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:20.379  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:20.379  INFO 5448 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:20.379  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:20.379  INFO 5448 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:00:20.383 DEBUG 5448 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:00:20.384 DEBUG 5448 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:00:20.385 DEBUG 5448 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:00:20.385 DEBUG 5448 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:00:20.385 DEBUG 5448 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:00:20.385  INFO 5448 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:00:20.385  INFO 5448 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:20.385  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:00:20.385  INFO 5448 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:00:20.398  INFO 5448 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:20.398  INFO 5448 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:20.385  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:00:20.401  INFO 5448 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:23.421  INFO 5448 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:23.424 DEBUG 5448 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 16:00:23.424 DEBUG 5448 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 16:00:23.426 DEBUG 5448 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 16:00:23.427  INFO 5448 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 16:00:23.427  INFO 5448 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:26.463  INFO 5448 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:26.464 DEBUG 5448 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 16:00:26.465 DEBUG 5448 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 16:00:26.467 DEBUG 5448 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 16:00:26.468  INFO 5448 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 16:00:26.468  INFO 5448 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:00:30.191  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@2b014042]}
2024-03-31 16:00:30.192 DEBUG 5448 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 16:00:30.193 DEBUG 5448 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 16:00:30.195 DEBUG 5448 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 16:00:30.195  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 16:00:30.196  INFO 5448 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:03:50.253  INFO 5448 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:03:50.256  INFO 5448 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 16:03:50.261  INFO 5448 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:03:52.968  INFO 23764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 23764 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:03:52.968 DEBUG 23764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:03:52.968  INFO 23764 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:03:52.991  INFO 23764 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:03:52.992  INFO 23764 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:03:53.427  INFO 23764 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:03:53.483  INFO 23764 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2024-03-31 16:03:53.923  INFO 23764 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:03:53.930  INFO 23764 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:03:53.931  INFO 23764 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:03:53.984  INFO 23764 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:03:53.985  INFO 23764 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 993 ms
2024-03-31 16:03:54.087  INFO 23764 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:03:54.107  INFO 23764 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:03:54.184  INFO 23764 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:03:54.243  INFO 23764 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:03:54.420  INFO 23764 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:03:54.430  INFO 23764 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:03:54.893  INFO 23764 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:03:54.897  INFO 23764 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:03:55.600  WARN 23764 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:03:55.805  INFO 23764 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:03:56.102  INFO 23764 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:03:56.136  INFO 23764 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:03:56.144  INFO 23764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.481 seconds (JVM running for 4.222)
2024-03-31 16:04:00.629  INFO 23764 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:04:00.629  INFO 23764 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:04:00.630  INFO 23764 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 16:04:00.976  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:04:00.983  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:04:00.983  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:01.227  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@587706f5, org.apache.catalina.connector.ResponseFacade@2d340648]}
2024-03-31 16:04:01.439  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:04:01.439  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:06.893  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@2d340648, hyf, hyfhsy, 274t, org.apache.catalina.session.StandardSessionFacade@5768495e, {}]}
2024-03-31 16:04:06.924 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:04:06.930 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:04:06.941 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:04:06.945  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:04:06.946  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:06.967  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:04:07.048  WARN 23764 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:04:07.061  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:04:07.062  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:08.765  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:04:08.769  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:04:08.770  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:09.064  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:09.064  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:09.064  INFO 23764 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:09.064  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:09.071 DEBUG 23764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:04:09.071 DEBUG 23764 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:04:09.071 DEBUG 23764 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:04:09.072 DEBUG 23764 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:04:09.072 DEBUG 23764 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:04:09.072 DEBUG 23764 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:04:09.072 DEBUG 23764 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:04:09.072 DEBUG 23764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:04:09.074 DEBUG 23764 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:04:09.075 DEBUG 23764 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:04:09.075 DEBUG 23764 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:04:09.075  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:04:09.075  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:09.084 DEBUG 23764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:04:09.075  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:04:09.085  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:04:09.085  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:09.085  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:09.075  INFO 23764 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:04:09.097  INFO 23764 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:10.592  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:10.594 DEBUG 23764 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 16:04:10.594 DEBUG 23764 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 16:04:10.597 DEBUG 23764 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 16:04:10.598  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 16:04:10.598  INFO 23764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:40.368  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:04:40.368 DEBUG 23764 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:04:40.370 DEBUG 23764 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:04:40.372 DEBUG 23764 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:04:40.372  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@5768495e, org.apache.catalina.connector.ResponseFacade@2d340648]}
2024-03-31 16:04:40.372  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:04:40.372 DEBUG 23764 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 16:04:40.372  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:04:40.373 DEBUG 23764 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 16:04:40.378 DEBUG 23764 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 16:04:40.379  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:04:40.379  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:19.979  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:06:19.979  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:06:19.979  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:20.222  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:20.222  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:20.223  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:20.225  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:20.230 DEBUG 23764 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:06:20.231 DEBUG 23764 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:06:20.232 DEBUG 23764 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:06:20.232 DEBUG 23764 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:06:20.225 DEBUG 23764 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:06:20.239 DEBUG 23764 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:06:20.240 DEBUG 23764 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:06:20.240  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:06:20.242  INFO 23764 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:20.244 DEBUG 23764 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:06:20.246  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:06:20.247  INFO 23764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:20.254 DEBUG 23764 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:06:20.255 DEBUG 23764 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:06:20.257 DEBUG 23764 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:06:20.258  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:06:20.258 DEBUG 23764 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:06:20.258  INFO 23764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:20.259  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:06:20.259  INFO 23764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:57.411  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:57.411  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:57.411  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@5768495e]}
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:06:57.412 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:06:57.413 DEBUG 23764 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:06:57.413 DEBUG 23764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:06:57.413 DEBUG 23764 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:06:57.413  INFO 23764 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:06:57.437  INFO 23764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@18ca17a7]}
2024-03-31 16:06:57.443 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 16:06:57.444 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 16:06:57.445 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 16:06:57.446 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 16:06:57.448 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 16:06:57.450 DEBUG 23764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 16:06:57.450 DEBUG 23764 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 16:06:57.450 DEBUG 23764 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 1(Long)
2024-03-31 16:06:57.452 DEBUG 23764 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 16:06:57.452  INFO 23764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:06:57.452  INFO 23764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:07:38.310  INFO 23764 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:07:38.312  INFO 23764 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 16:07:38.324  INFO 23764 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:07:41.388  INFO 35768 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 35768 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:07:41.389 DEBUG 35768 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:07:41.389  INFO 35768 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:07:41.411  INFO 35768 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:07:41.411  INFO 35768 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:07:41.804  INFO 35768 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:07:41.859  INFO 35768 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2024-03-31 16:07:42.260  INFO 35768 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:07:42.266  INFO 35768 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:07:42.266  INFO 35768 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:07:42.327  INFO 35768 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:07:42.328  INFO 35768 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 916 ms
2024-03-31 16:07:42.442  INFO 35768 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:07:42.467  INFO 35768 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:07:42.549  INFO 35768 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:07:42.596  INFO 35768 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:07:42.784  INFO 35768 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:07:42.793  INFO 35768 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:07:43.252  INFO 35768 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:07:43.258  INFO 35768 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:07:43.958  WARN 35768 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:07:44.169  INFO 35768 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:07:44.463  INFO 35768 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:07:44.492  INFO 35768 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:07:44.499  INFO 35768 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.421 seconds (JVM running for 4.184)
2024-03-31 16:07:53.649  INFO 35768 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:07:53.650  INFO 35768 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:07:53.651  INFO 35768 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 16:07:55.632  INFO 35768 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:07:55.643  INFO 35768 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:07:55.643  INFO 35768 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:07:55.943  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@594cfaf9, org.apache.catalina.connector.ResponseFacade@4209b12c]}
2024-03-31 16:07:56.253  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:07:56.254  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:01.682  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@4209b12c, hyf, hyfhsy, g3e4, org.apache.catalina.session.StandardSessionFacade@1ad98a3, {}]}
2024-03-31 16:08:01.712 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:08:01.719 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:08:01.729 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:08:01.735  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:08:01.735  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:01.756  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:08:01.835  WARN 35768 --- [http-nio-8080-exec-4] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:08:01.846  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:08:01.846  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:03.931  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:08:03.935  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:08:03.936  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:04.211  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:04.213  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:04.213  INFO 35768 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:04.213  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:08:04.215 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:08:04.217 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:08:04.217 DEBUG 35768 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:08:04.217 DEBUG 35768 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:08:04.217 DEBUG 35768 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:08:04.218  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:08:04.218  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:04.218  INFO 35768 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:08:04.218  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:08:04.230  INFO 35768 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:04.230  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:04.218  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:08:04.234  INFO 35768 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:09.295  INFO 35768 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:09.297 DEBUG 35768 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:08:09.297 DEBUG 35768 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:08:09.299  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@1ad98a3, org.apache.catalina.connector.ResponseFacade@4c4c9f3e]}
2024-03-31 16:08:09.299 DEBUG 35768 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:08:09.300 DEBUG 35768 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 16:08:09.300  INFO 35768 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:08:09.300  INFO 35768 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:09.300 DEBUG 35768 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 16:08:09.303 DEBUG 35768 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 16:08:09.303  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:08:09.304  INFO 35768 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:28.750  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:08:28.750  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:08:28.750  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:29.000  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:29.002  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:29.002 DEBUG 35768 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:08:29.002  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:29.002  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@1ad98a3]}
2024-03-31 16:08:29.002 DEBUG 35768 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:08:29.003 DEBUG 35768 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:08:29.003 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:08:29.003 DEBUG 35768 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:08:29.003 DEBUG 35768 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:08:29.004 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:08:29.006 DEBUG 35768 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:08:29.006 DEBUG 35768 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:08:29.007  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:08:29.006 DEBUG 35768 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:08:29.008  INFO 35768 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:29.007  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:08:29.009  INFO 35768 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:29.013 DEBUG 35768 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:08:29.014 DEBUG 35768 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:08:29.016  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:08:29.017  INFO 35768 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:08:29.014  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:08:29.022  INFO 35768 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:10.388  INFO 35768 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:19:10.390  INFO 35768 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 16:19:10.398  INFO 35768 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:19:13.252  INFO 27588 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 27588 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:19:13.253 DEBUG 27588 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:19:13.253  INFO 27588 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:19:13.278  INFO 27588 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:19:13.278  INFO 27588 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:19:13.762  INFO 27588 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:19:13.823  INFO 27588 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2024-03-31 16:19:14.311  INFO 27588 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:19:14.318  INFO 27588 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:19:14.318  INFO 27588 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:19:14.384  INFO 27588 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:19:14.384  INFO 27588 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1105 ms
2024-03-31 16:19:14.502  INFO 27588 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:19:14.530  INFO 27588 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:19:14.600  INFO 27588 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:19:14.649  INFO 27588 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:19:14.846  INFO 27588 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:19:14.857  INFO 27588 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:19:15.354  INFO 27588 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:19:15.359  INFO 27588 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:19:16.074  WARN 27588 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:19:16.251  INFO 27588 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:19:16.560  INFO 27588 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:19:16.590  INFO 27588 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:19:16.599  INFO 27588 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.695 seconds (JVM running for 4.499)
2024-03-31 16:19:27.926  INFO 27588 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:19:27.928  INFO 27588 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:19:27.929  INFO 27588 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 16:19:28.369  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:19:28.377  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:19:28.377  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:28.614  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@3107d20c, org.apache.catalina.connector.ResponseFacade@4cb1f300]}
2024-03-31 16:19:28.819  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:19:28.819  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:35.070  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@4cb1f300, hyf, hyfhsy, w1f7, org.apache.catalina.session.StandardSessionFacade@37f21610, {}]}
2024-03-31 16:19:35.100 DEBUG 27588 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:19:35.106 DEBUG 27588 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:19:35.116 DEBUG 27588 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:19:35.122  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:19:35.122  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:35.143  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:19:35.223  WARN 27588 --- [http-nio-8080-exec-3] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:19:35.234  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:19:35.234  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:37.228  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:19:37.232  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:19:37.233  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:37.454  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:37.457 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:19:37.458 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:19:37.460 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:19:37.462  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:19:37.470  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:37.610  INFO 27588 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:37.612 DEBUG 27588 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:19:37.612 DEBUG 27588 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:19:37.614 DEBUG 27588 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:19:37.615  INFO 27588 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:19:37.625  INFO 27588 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:37.665  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:37.677 DEBUG 27588 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:19:37.678 DEBUG 27588 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:19:37.680 DEBUG 27588 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:19:37.681  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:19:37.683  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:37.720  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:37.722 DEBUG 27588 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:19:37.723 DEBUG 27588 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:19:37.726 DEBUG 27588 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:19:37.726  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:19:37.727  INFO 27588 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:40.786  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@5b21cd31]}
2024-03-31 16:19:40.799 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 16:19:40.799 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 16:19:40.800 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 16:19:40.801 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 16:19:40.802 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 16:19:40.804 DEBUG 27588 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 16:19:40.805 DEBUG 27588 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 16:19:40.805 DEBUG 27588 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 1(Long)
2024-03-31 16:19:40.807 DEBUG 27588 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 16:19:40.807  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:19:40.807  INFO 27588 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:40.917  INFO 27588 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:40.918 DEBUG 27588 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:19:40.918 DEBUG 27588 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:19:40.920 DEBUG 27588 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 16:19:40.920  INFO 27588 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 16:19:40.920  INFO 27588 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:40.929  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:40.930 DEBUG 27588 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:19:40.931 DEBUG 27588 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:19:40.933 DEBUG 27588 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:19:40.933  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:19:40.934  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:19:40.944  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:19:40.945 DEBUG 27588 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:19:40.946 DEBUG 27588 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:19:40.947 DEBUG 27588 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:19:40.947  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:19:40.947  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:20:14.783  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:20:14.784 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:20:14.784 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:20:14.787  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@37f21610, org.apache.catalina.connector.ResponseFacade@5b21cd31]}
2024-03-31 16:20:14.787 DEBUG 27588 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:20:14.787 DEBUG 27588 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 16:20:14.787  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:20:14.787  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:20:14.787 DEBUG 27588 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 16:20:14.793 DEBUG 27588 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 16:20:14.793  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:20:14.793  INFO 27588 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:20:14.797  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:20:14.797 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:20:14.797 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:20:14.799 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:20:14.799  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:20:14.800  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:00.952  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:24:00.953 DEBUG 27588 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 16:24:00.954 DEBUG 27588 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 16:24:00.955 DEBUG 27588 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 16:24:00.956  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 16:24:00.956  INFO 27588 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:09.962  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:24:09.963  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:24:09.963  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:10.195  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:24:10.196 DEBUG 27588 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:24:10.198 DEBUG 27588 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:24:10.200 DEBUG 27588 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:24:10.201  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:24:10.202  INFO 27588 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:10.282  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:24:10.282 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:24:10.283 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:24:10.286 DEBUG 27588 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:24:10.286  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:24:10.287  INFO 27588 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:10.348  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:24:10.349 DEBUG 27588 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:24:10.349 DEBUG 27588 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:24:10.350 DEBUG 27588 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:24:10.351  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:24:10.351  INFO 27588 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:10.429  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:24:10.430 DEBUG 27588 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:24:10.431 DEBUG 27588 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:24:10.433 DEBUG 27588 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:24:10.435  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:24:10.435  INFO 27588 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:39.958  INFO 27588 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:24:39.961  INFO 27588 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 16:24:39.971  INFO 27588 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:24:42.669  INFO 14816 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 14816 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:24:42.670 DEBUG 14816 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:24:42.670  INFO 14816 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:24:42.702  INFO 14816 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:24:42.702  INFO 14816 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:24:43.182  INFO 14816 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:24:43.244  INFO 14816 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56 ms. Found 5 JPA repository interfaces.
2024-03-31 16:24:43.733  INFO 14816 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:24:43.740  INFO 14816 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:24:43.740  INFO 14816 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:24:43.806  INFO 14816 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:24:43.806  INFO 14816 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1103 ms
2024-03-31 16:24:43.930  INFO 14816 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:24:43.957  INFO 14816 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:24:44.034  INFO 14816 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:24:44.094  INFO 14816 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:24:44.310  INFO 14816 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:24:44.323  INFO 14816 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:24:44.883  INFO 14816 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:24:44.890  INFO 14816 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:24:45.739  WARN 14816 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:24:45.982  INFO 14816 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:24:46.324  INFO 14816 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:24:46.371  INFO 14816 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:24:46.384  INFO 14816 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.023 seconds (JVM running for 4.792)
2024-03-31 16:24:48.484  INFO 14816 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:24:48.484  INFO 14816 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:24:48.485  INFO 14816 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 16:24:48.618  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:24:48.627  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:24:48.627  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:48.858  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@68ce6f3d, org.apache.catalina.connector.ResponseFacade@36f6ffb8]}
2024-03-31 16:24:49.070  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:24:49.070  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:55.605  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@36f6ffb8, hyf, hyfhsy, p19v, org.apache.catalina.session.StandardSessionFacade@7c484b96, {}]}
2024-03-31 16:24:55.635 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:24:55.642 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:24:55.652 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:24:55.657  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:24:55.657  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:55.679  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:24:55.758  WARN 14816 --- [http-nio-8080-exec-5] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:24:55.768  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:24:55.769  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:57.945  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:24:57.949  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:24:57.950  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:58.277  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:24:58.281 DEBUG 14816 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:24:58.282 DEBUG 14816 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:24:58.287 DEBUG 14816 --- [http-nio-8080-exec-2] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:24:58.289  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:24:58.301  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:58.395  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:24:58.395 DEBUG 14816 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:24:58.396 DEBUG 14816 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:24:58.397 DEBUG 14816 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:24:58.398  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:24:58.406  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:58.503  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:24:58.504 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:24:58.504 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:24:58.507 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:24:58.507  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:24:58.507  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:24:58.585  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:24:58.586 DEBUG 14816 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:24:58.587 DEBUG 14816 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:24:58.588 DEBUG 14816 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:24:58.590  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:24:58.590  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:25:25.416  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:25:25.417  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:25:25.417  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:25:25.725  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:25:25.726 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:25:25.727 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:25:25.729 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:25:25.729  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:25:25.729  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:25:25.759  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:25:25.759 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:25:25.760 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:25:25.761 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:25:25.762  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [Apply(id=1, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sat Mar 30 17:10:10 CST 2024)]
2024-03-31 16:25:25.762  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:25:25.807  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:25:25.807 DEBUG 14816 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:25:25.808 DEBUG 14816 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:25:25.810 DEBUG 14816 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:25:25.810  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:25:25.810  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:25:25.900  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:25:25.901 DEBUG 14816 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:25:25.901 DEBUG 14816 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:25:25.902 DEBUG 14816 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:25:25.903  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:25:25.903  INFO 14816 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:05.997  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 1, org.apache.catalina.connector.ResponseFacade@499ba917]}
2024-03-31 16:26:06.005 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 16:26:06.005 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 16:26:06.007 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 16:26:06.008 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 16:26:06.009 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 16:26:06.011 DEBUG 14816 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 16:26:06.011 DEBUG 14816 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 16:26:06.012 DEBUG 14816 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 1(Long)
2024-03-31 16:26:06.013 DEBUG 14816 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 16:26:06.013  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:26:06.013  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:06.101  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:06.102 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:26:06.102 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:26:06.103 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 16:26:06.103  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 16:26:06.103  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:06.112  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:06.112 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:26:06.112 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:26:06.114 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 16:26:06.114  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:26:06.114  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:06.122  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:06.123 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:26:06.124 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:26:06.125 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:26:06.125  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 16:26:06.126  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:20.876  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@7c484b96, org.apache.catalina.connector.ResponseFacade@499ba917]}
2024-03-31 16:26:20.877 DEBUG 14816 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 16:26:20.878 DEBUG 14816 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 16:26:20.884 DEBUG 14816 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 16:26:20.884  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:26:20.884  INFO 14816 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:20.906  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:20.906 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:26:20.907 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:26:20.908 DEBUG 14816 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:26:20.908  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:26:20.909  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:20.917  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:20.918 DEBUG 14816 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:26:20.918 DEBUG 14816 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:26:20.919 DEBUG 14816 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:26:20.920  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:26:20.920  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:53.102  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:26:53.103  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:26:53.103  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:53.360  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:53.361 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:26:53.362 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:26:53.364 DEBUG 14816 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:26:53.365  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:26:53.365  INFO 14816 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:53.386  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:53.386 DEBUG 14816 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:26:53.414 DEBUG 14816 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:26:53.416 DEBUG 14816 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 16:26:53.416  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 16:26:53.416  INFO 14816 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:53.467  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:53.468 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:26:53.468 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:26:53.469 DEBUG 14816 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:26:53.470  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:26:53.470  INFO 14816 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:26:53.511  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:26:53.512 DEBUG 14816 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:26:53.512 DEBUG 14816 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:26:53.514 DEBUG 14816 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:26:53.515  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:26:53.515  INFO 14816 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:27:29.694  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:27:29.694  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:27:29.694  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:27:29.932  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:27:29.955 DEBUG 14816 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:27:29.956 DEBUG 14816 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:27:29.967 DEBUG 14816 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:27:29.967  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:27:29.967  INFO 14816 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:27:29.986  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:27:29.986 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:27:29.987 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:27:29.988 DEBUG 14816 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:27:29.989  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 16:27:29.989  INFO 14816 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:27:30.031  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:27:30.031 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:27:30.031 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:27:30.032 DEBUG 14816 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:27:30.033  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:27:30.033  INFO 14816 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:27:30.082  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@7c484b96]}
2024-03-31 16:27:30.082 DEBUG 14816 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:27:30.083 DEBUG 14816 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:27:30.086 DEBUG 14816 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:27:30.086  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:27:30.086  INFO 14816 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:31:36.157  INFO 14816 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:31:36.160  INFO 14816 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 16:31:36.169  INFO 14816 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 16:59:02.338  INFO 16808 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 16808 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 16:59:02.339 DEBUG 16808 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 16:59:02.339  INFO 16808 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 16:59:02.363  INFO 16808 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 16:59:02.363  INFO 16808 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 16:59:02.826  INFO 16808 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 16:59:02.879  INFO 16808 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2024-03-31 16:59:03.321  INFO 16808 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 16:59:03.328  INFO 16808 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 16:59:03.328  INFO 16808 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 16:59:03.385  INFO 16808 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 16:59:03.385  INFO 16808 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1021 ms
2024-03-31 16:59:03.498  INFO 16808 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 16:59:03.520  INFO 16808 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 16:59:03.598  INFO 16808 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 16:59:03.650  INFO 16808 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 16:59:03.852  INFO 16808 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 16:59:03.864  INFO 16808 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 16:59:04.430  INFO 16808 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 16:59:04.436  INFO 16808 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 16:59:05.180  WARN 16808 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 16:59:05.398  INFO 16808 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 16:59:05.674  INFO 16808 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 16:59:05.705  INFO 16808 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 16:59:05.713  INFO 16808 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.705 seconds (JVM running for 4.456)
2024-03-31 16:59:10.060  INFO 16808 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 16:59:10.060  INFO 16808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 16:59:10.062  INFO 16808 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-03-31 16:59:10.297  WARN 16808 --- [http-nio-8080-exec-1] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [220] milliseconds.
2024-03-31 16:59:10.907  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 16:59:10.914  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 16:59:10.915  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:11.138  INFO 16808 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@2c5e5ad2, org.apache.catalina.connector.ResponseFacade@66254cce]}
2024-03-31 16:59:11.362  INFO 16808 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 16:59:11.362  INFO 16808 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:20.525  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@66254cce, hyf, hyfhsy, e0p5, org.apache.catalina.session.StandardSessionFacade@37f21610, {}]}
2024-03-31 16:59:20.557 DEBUG 16808 --- [http-nio-8080-exec-2] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 16:59:20.564 DEBUG 16808 --- [http-nio-8080-exec-2] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 16:59:20.573 DEBUG 16808 --- [http-nio-8080-exec-2] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 16:59:20.578  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 16:59:20.578  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:20.599  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 16:59:20.686  WARN 16808 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 16:59:20.701  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 16:59:20.701  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:22.840  INFO 16808 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 16:59:22.845  INFO 16808 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 16:59:22.845  INFO 16808 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:23.197  INFO 16808 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:23.199 DEBUG 16808 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 16:59:23.201 DEBUG 16808 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 16:59:23.203 DEBUG 16808 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 16:59:23.204  INFO 16808 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 16:59:23.211  INFO 16808 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:23.290  INFO 16808 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:23.291 DEBUG 16808 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 16:59:23.291 DEBUG 16808 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 16:59:23.294 DEBUG 16808 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 16:59:23.295  INFO 16808 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 16:59:23.306  INFO 16808 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:23.319  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:23.320 DEBUG 16808 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 16:59:23.320 DEBUG 16808 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 16:59:23.323 DEBUG 16808 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 16:59:23.324  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 16:59:23.324  INFO 16808 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:23.352  INFO 16808 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:23.353 DEBUG 16808 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 16:59:23.354 DEBUG 16808 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 16:59:23.357 DEBUG 16808 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 16:59:23.358  INFO 16808 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 16:59:23.360  INFO 16808 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:48.618  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L., org.apache.catalina.connector.ResponseFacade@5c8d1735, org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:48.621 DEBUG 16808 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 16:59:48.621 DEBUG 16808 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L.(String), L.(String), L.(String), L.(String), L.(String), L.(String)
2024-03-31 16:59:48.624 DEBUG 16808 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 16:59:48.624  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 16:59:48.634  INFO 16808 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 16:59:58.735  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[Kafka, org.apache.catalina.connector.ResponseFacade@5c8d1735, org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 16:59:58.736 DEBUG 16808 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 16:59:58.737 DEBUG 16808 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), Kafka(String), Kafka(String), Kafka(String), Kafka(String), Kafka(String), Kafka(String)
2024-03-31 16:59:58.738 DEBUG 16808 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 16:59:58.738  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, nickname=Kafka_Fan, signature=不要停止我的音乐, isFriend=true, isMe=false)]
2024-03-31 16:59:58.739  INFO 16808 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:00:22.435  INFO 16808 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@5c8d1735, org.apache.catalina.session.StandardSessionFacade@37f21610]}
2024-03-31 17:00:22.437 DEBUG 16808 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:00:22.438 DEBUG 16808 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:00:22.439 DEBUG 16808 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:00:22.440  INFO 16808 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:00:22.440  INFO 16808 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:38.843  INFO 16808 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:01:38.846  INFO 16808 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:01:38.855  INFO 16808 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:01:42.148  INFO 33252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 33252 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:01:42.148 DEBUG 33252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:01:42.148  INFO 33252 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:01:42.171  INFO 33252 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:01:42.172  INFO 33252 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:01:42.592  INFO 33252 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:01:42.639  INFO 33252 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 5 JPA repository interfaces.
2024-03-31 17:01:43.056  INFO 33252 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:01:43.062  INFO 33252 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:01:43.062  INFO 33252 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:01:43.125  INFO 33252 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:01:43.125  INFO 33252 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 953 ms
2024-03-31 17:01:43.248  INFO 33252 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:01:43.275  INFO 33252 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:01:43.347  INFO 33252 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:01:43.399  INFO 33252 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:01:43.606  INFO 33252 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:01:43.616  INFO 33252 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:01:44.160  INFO 33252 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:01:44.165  INFO 33252 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:01:44.947  WARN 33252 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:01:45.174  INFO 33252 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:01:45.507  INFO 33252 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:01:45.542  INFO 33252 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:01:45.550  INFO 33252 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.738 seconds (JVM running for 4.719)
2024-03-31 17:01:47.921  INFO 33252 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:01:47.921  INFO 33252 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:01:47.923  INFO 33252 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-03-31 17:01:48.588  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:01:48.595  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:01:48.595  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:48.841  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@4d4aa5eb, org.apache.catalina.connector.ResponseFacade@6340ed4c]}
2024-03-31 17:01:49.088  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:01:49.088  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:53.645  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@6340ed4c, hyf, hyfhsy, kd56, org.apache.catalina.session.StandardSessionFacade@6596924e, {}]}
2024-03-31 17:01:53.675 DEBUG 33252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:01:53.680 DEBUG 33252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:01:53.689 DEBUG 33252 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:01:53.695  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:01:53.695  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:53.717  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:01:53.799  WARN 33252 --- [http-nio-8080-exec-4] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:01:53.813  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:01:53.813  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:56.782  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:01:56.785  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:01:56.785  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:57.045  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:01:57.047 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:01:57.048 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:01:57.050 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:01:57.052  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:01:57.057  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:57.133  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:01:57.134 DEBUG 33252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:01:57.135 DEBUG 33252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:01:57.137 DEBUG 33252 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:01:57.138  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:01:57.150  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:57.197  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:01:57.199 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:01:57.199 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:01:57.200 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:01:57.202  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:01:57.202  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:01:57.304  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:01:57.305 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:01:57.306 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:01:57.308 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:01:57.309  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:01:57.309  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:02:01.719  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:02:01.721 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:02:01.722 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:02:01.725 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:02:01.725  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_2.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:02:01.733  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:02:35.246  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:02:35.247 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:02:35.248 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:02:35.251 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:02:35.251  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_1.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:02:35.251  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:04:56.720  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:04:56.721 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:04:56.722 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:04:56.723 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:04:56.724  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:04:56.724  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:05:13.600  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:05:13.601 DEBUG 33252 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:05:13.602 DEBUG 33252 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:05:13.605 DEBUG 33252 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:05:13.605  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_4.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:05:13.605  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:05:33.822  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:05:33.824 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:05:33.824 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:05:33.826 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:05:33.827  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:05:33.827  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:05:50.656  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:05:50.657 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:05:50.658 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:05:50.660 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:05:50.660  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:05:50.660  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:06:03.633  INFO 33252 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@c29615f, org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:06:03.635 DEBUG 33252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:06:03.635 DEBUG 33252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:06:03.637 DEBUG 33252 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:06:03.637  INFO 33252 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:06:03.638  INFO 33252 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:06:35.255  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addApply', args=[Apply(id=null, senderId=1, recipientId=1, senderNickname=卡夫卡, senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, applyTime=Sun Mar 31 17:06:35 CST 2024), org.apache.catalina.connector.ResponseFacade@c29615f]}
2024-03-31 17:06:35.256 DEBUG 33252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.addApply      : ==>  Preparing: insert into t_apply (sender_id, recipient_id, sender_nickname, sender_avatar, apply_time) values (?, ?, ?, ?, ?)
2024-03-31 17:06:35.260 DEBUG 33252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.addApply      : ==> Parameters: 1(Long), 1(Long), 卡夫卡(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), 2024-03-31 17:06:35.219(Timestamp)
2024-03-31 17:06:35.270 DEBUG 33252 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.addApply      : <==    Updates: 1
2024-03-31 17:06:35.271  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:06:35.271  INFO 33252 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:03.492  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:07:03.492  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:07:03.493  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:03.772  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:03.774 DEBUG 33252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:07:03.774 DEBUG 33252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:07:03.780 DEBUG 33252 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:07:03.781  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:07:03.781  INFO 33252 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:03.841  INFO 33252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:03.843 DEBUG 33252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:07:03.844 DEBUG 33252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:07:03.845 DEBUG 33252 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 2
2024-03-31 17:07:03.846  INFO 33252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=6, senderId=1, recipientId=1, senderNickname=卡夫卡, senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, applyTime=Sun Mar 31 17:06:35 CST 2024), Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:07:03.846  INFO 33252 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:03.931  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:03.931 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:07:03.934 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:07:03.939 DEBUG 33252 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:07:03.942  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:07:03.942  INFO 33252 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:04.069  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:04.070 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:07:04.070 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:07:04.075 DEBUG 33252 --- [http-nio-8080-exec-1] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:07:04.076  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:07:04.077  INFO 33252 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:58.140  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:07:58.140  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:07:58.140  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:58.391  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:58.392 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:07:58.392 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:07:58.395 DEBUG 33252 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:07:58.396  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:07:58.396  INFO 33252 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:58.470  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:58.471 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:07:58.471 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:07:58.473 DEBUG 33252 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:07:58.473  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:07:58.473  INFO 33252 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:58.528  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:58.529 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:07:58.543 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:07:58.562 DEBUG 33252 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:07:58.564  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:07:58.566  INFO 33252 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:07:58.632  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@6596924e]}
2024-03-31 17:07:58.634 DEBUG 33252 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:07:58.634 DEBUG 33252 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:07:58.636 DEBUG 33252 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:07:58.636  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:07:58.636  INFO 33252 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:10:59.368  INFO 33252 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:10:59.371  INFO 33252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:10:59.381  INFO 33252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:11:02.200  INFO 7788 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 7788 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:11:02.200 DEBUG 7788 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:11:02.201  INFO 7788 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:11:02.224  INFO 7788 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:11:02.224  INFO 7788 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:11:02.662  INFO 7788 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:11:02.716  INFO 7788 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2024-03-31 17:11:03.149  INFO 7788 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:11:03.155  INFO 7788 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:11:03.155  INFO 7788 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:11:03.211  INFO 7788 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:11:03.211  INFO 7788 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 985 ms
2024-03-31 17:11:03.309  INFO 7788 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:11:03.327  INFO 7788 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:11:03.395  INFO 7788 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:11:03.453  INFO 7788 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:11:03.650  INFO 7788 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:11:03.660  INFO 7788 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:11:04.135  INFO 7788 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:11:04.140  INFO 7788 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:11:04.794  WARN 7788 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:11:04.953  INFO 7788 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:11:05.241  INFO 7788 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:11:05.269  INFO 7788 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:11:05.277  INFO 7788 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.411 seconds (JVM running for 4.201)
2024-03-31 17:11:10.285  INFO 7788 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:11:10.287  INFO 7788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:11:10.288  INFO 7788 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:11:10.602  INFO 7788 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:11:10.610  INFO 7788 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:11:10.610  INFO 7788 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:10.836  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@947dcd8, org.apache.catalina.connector.ResponseFacade@77207d01]}
2024-03-31 17:11:11.055  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:11:11.055  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:17.372  INFO 7788 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@77207d01, hyf, hyfhsy, z47w, org.apache.catalina.session.StandardSessionFacade@61e57aed, {}]}
2024-03-31 17:11:17.405 DEBUG 7788 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:11:17.414 DEBUG 7788 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:11:17.427 DEBUG 7788 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:11:17.434  INFO 7788 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:11:17.435  INFO 7788 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:17.456  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:11:17.539  WARN 7788 --- [http-nio-8080-exec-3] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:11:17.552  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:11:17.552  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:19.547  INFO 7788 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:11:19.551  INFO 7788 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:11:19.552  INFO 7788 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:19.850  INFO 7788 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@61e57aed]}
2024-03-31 17:11:19.852 DEBUG 7788 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:11:19.853 DEBUG 7788 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:11:19.855 DEBUG 7788 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:11:19.857  INFO 7788 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:11:19.863  INFO 7788 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:19.922  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@61e57aed]}
2024-03-31 17:11:19.923 DEBUG 7788 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:11:19.923 DEBUG 7788 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:11:19.925 DEBUG 7788 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:11:19.925  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:11:19.936  INFO 7788 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:19.975  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@61e57aed]}
2024-03-31 17:11:19.976 DEBUG 7788 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:11:19.977 DEBUG 7788 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:11:19.979 DEBUG 7788 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:11:19.980  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:11:19.980  INFO 7788 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:19.995  INFO 7788 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@61e57aed]}
2024-03-31 17:11:19.997 DEBUG 7788 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:11:19.997 DEBUG 7788 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:11:19.999 DEBUG 7788 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:11:20.001  INFO 7788 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:11:20.001  INFO 7788 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:11:29.203  INFO 7788 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@77207d01, org.apache.catalina.session.StandardSessionFacade@61e57aed]}
2024-03-31 17:11:29.204 DEBUG 7788 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:11:29.206 DEBUG 7788 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:11:29.209 DEBUG 7788 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:11:29.210  INFO 7788 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:11:29.221  INFO 7788 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:13:48.122  INFO 7788 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:13:48.124  INFO 7788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:13:48.132  INFO 7788 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:13:52.125  INFO 1240 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 1240 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:13:52.126 DEBUG 1240 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:13:52.126  INFO 1240 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:13:52.151  INFO 1240 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:13:52.151  INFO 1240 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:13:52.578  INFO 1240 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:13:52.632  INFO 1240 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 47 ms. Found 5 JPA repository interfaces.
2024-03-31 17:13:53.058  INFO 1240 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:13:53.065  INFO 1240 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:13:53.065  INFO 1240 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:13:53.125  INFO 1240 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:13:53.125  INFO 1240 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 974 ms
2024-03-31 17:13:53.229  INFO 1240 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:13:53.252  INFO 1240 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:13:53.331  INFO 1240 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:13:53.388  INFO 1240 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:13:53.578  INFO 1240 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:13:53.590  INFO 1240 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:13:54.096  INFO 1240 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:13:54.101  INFO 1240 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:13:54.752  WARN 1240 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:13:54.949  INFO 1240 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:13:55.229  INFO 1240 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:13:55.258  INFO 1240 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:13:55.265  INFO 1240 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.454 seconds (JVM running for 4.185)
2024-03-31 17:14:02.041  INFO 1240 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:14:02.041  INFO 1240 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:14:02.043  INFO 1240 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2024-03-31 17:14:02.656  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:14:02.666  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:14:02.667  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:02.899  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@40c273bc, org.apache.catalina.connector.ResponseFacade@45e03ac]}
2024-03-31 17:14:03.110  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:14:03.111  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:09.174  INFO 1240 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@45e03ac, hyf, hyfhsy, h05j, org.apache.catalina.session.StandardSessionFacade@33f0518a, {}]}
2024-03-31 17:14:09.204 DEBUG 1240 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:14:09.212 DEBUG 1240 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:14:09.222 DEBUG 1240 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:14:09.227  INFO 1240 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:14:09.228  INFO 1240 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:09.252  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:14:09.329  WARN 1240 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:14:09.339  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:14:09.339  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:11.184  INFO 1240 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:14:11.189  INFO 1240 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:14:11.190  INFO 1240 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:11.400  INFO 1240 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:14:11.402 DEBUG 1240 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:14:11.403 DEBUG 1240 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:14:11.411 DEBUG 1240 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:14:11.413  INFO 1240 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:14:11.440  INFO 1240 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:11.516  INFO 1240 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:14:11.516 DEBUG 1240 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:14:11.517 DEBUG 1240 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:14:11.519 DEBUG 1240 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:14:11.519  INFO 1240 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:14:11.531  INFO 1240 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:11.554  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:14:11.555 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:14:11.556 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:14:11.557 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:14:11.558  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:14:11.558  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:11.628  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:14:11.628 DEBUG 1240 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:14:11.630 DEBUG 1240 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:14:11.632 DEBUG 1240 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:14:11.633  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:14:11.633  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:14:17.742  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@62347a07, org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:14:17.744 DEBUG 1240 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:14:17.745 DEBUG 1240 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:14:17.747 DEBUG 1240 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:14:17.747  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:14:17.755  INFO 1240 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:20:18.768  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@62347a07, org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:20:18.769 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:20:18.770 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:20:18.772 DEBUG 1240 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:20:18.772  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:20:18.773  INFO 1240 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:20:39.660  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[小熊, org.apache.catalina.connector.ResponseFacade@62347a07, org.apache.catalina.session.StandardSessionFacade@33f0518a]}
2024-03-31 17:20:39.662 DEBUG 1240 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:20:39.662 DEBUG 1240 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 小熊(String), 小熊(String), 小熊(String), 小熊(String), 小熊(String), 小熊(String)
2024-03-31 17:20:39.664 DEBUG 1240 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:20:39.664  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, nickname=小熊维尼, signature=生命中最美丽的一天, isFriend=true, isMe=false)]
2024-03-31 17:20:39.664  INFO 1240 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:22:46.303  INFO 1240 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:22:46.306  INFO 1240 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:22:46.315  INFO 1240 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:22:49.886  INFO 15412 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 15412 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:22:49.886 DEBUG 15412 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:22:49.886  INFO 15412 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:22:49.915  INFO 15412 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:22:49.915  INFO 15412 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:22:50.324  INFO 15412 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:22:50.382  INFO 15412 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2024-03-31 17:22:50.803  INFO 15412 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:22:50.810  INFO 15412 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:22:50.810  INFO 15412 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:22:50.872  INFO 15412 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:22:50.872  INFO 15412 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 957 ms
2024-03-31 17:22:50.986  INFO 15412 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:22:51.008  INFO 15412 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:22:51.091  INFO 15412 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:22:51.145  INFO 15412 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:22:51.341  INFO 15412 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:22:51.351  INFO 15412 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:22:51.843  INFO 15412 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:22:51.850  INFO 15412 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:22:52.565  WARN 15412 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:22:52.745  INFO 15412 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:22:53.034  INFO 15412 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:22:53.066  INFO 15412 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:22:53.073  INFO 15412 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.494 seconds (JVM running for 4.218)
2024-03-31 17:23:14.813  INFO 15412 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:23:14.814  INFO 15412 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:23:14.815  INFO 15412 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:23:16.601  INFO 15412 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:23:16.613  INFO 15412 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:23:16.614  INFO 15412 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:16.928  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@f7e8a9b, org.apache.catalina.connector.ResponseFacade@334bf336]}
2024-03-31 17:23:17.250  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:23:17.250  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:21.716  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@334bf336, hyf, hyfhsy, k8ex, org.apache.catalina.session.StandardSessionFacade@5829a4dd, {}]}
2024-03-31 17:23:21.746 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:23:21.753 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:23:21.762 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:23:21.768  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:23:21.768  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:21.789  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:23:21.870  WARN 15412 --- [http-nio-8080-exec-3] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:23:21.882  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:23:21.882  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:25.616  INFO 15412 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:23:25.619  INFO 15412 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:23:25.619  INFO 15412 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:25.882  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:23:25.884 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:23:25.886 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:23:25.888 DEBUG 15412 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:23:25.889  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:23:25.896  INFO 15412 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:25.935  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:23:25.936 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:23:25.936 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:23:25.939 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:23:25.939  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:23:25.947  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:26.016  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:23:26.017 DEBUG 15412 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:23:26.017 DEBUG 15412 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:23:26.019 DEBUG 15412 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:23:26.020  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:23:26.020  INFO 15412 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:26.131  INFO 15412 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:23:26.133 DEBUG 15412 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:23:26.134 DEBUG 15412 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:23:26.137 DEBUG 15412 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:23:26.137  INFO 15412 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:23:26.138  INFO 15412 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:23:33.655  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@334bf336, org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:23:33.657 DEBUG 15412 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:23:33.658 DEBUG 15412 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:23:33.660 DEBUG 15412 --- [http-nio-8080-exec-9] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:23:33.660  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:23:33.668  INFO 15412 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:25:18.276  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@334bf336, org.apache.catalina.session.StandardSessionFacade@5829a4dd]}
2024-03-31 17:25:18.277 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:25:18.278 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:25:18.280 DEBUG 15412 --- [http-nio-8080-exec-8] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:25:18.281  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:25:18.281  INFO 15412 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:38:27.930  INFO 15412 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:38:27.933  INFO 15412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:38:27.942  INFO 15412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:38:31.657  INFO 24604 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 24604 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:38:31.658 DEBUG 24604 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:38:31.658  INFO 24604 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:38:31.683  INFO 24604 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:38:31.683  INFO 24604 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:38:32.140  INFO 24604 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:38:32.197  INFO 24604 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2024-03-31 17:38:32.660  INFO 24604 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:38:32.668  INFO 24604 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:38:32.668  INFO 24604 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:38:32.731  INFO 24604 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:38:32.731  INFO 24604 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1047 ms
2024-03-31 17:38:32.868  INFO 24604 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:38:32.899  INFO 24604 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:38:32.977  INFO 24604 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:38:33.034  INFO 24604 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:38:33.255  INFO 24604 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:38:33.267  INFO 24604 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:38:33.900  INFO 24604 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:38:33.906  INFO 24604 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:38:34.751  WARN 24604 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:38:35.060  INFO 24604 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:38:35.376  INFO 24604 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:38:35.414  INFO 24604 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:38:35.422  INFO 24604 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.092 seconds (JVM running for 4.857)
2024-03-31 17:39:18.612  INFO 24604 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:39:18.615  INFO 24604 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:39:18.635  INFO 24604 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:39:21.564  INFO 29644 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 29644 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:39:21.564 DEBUG 29644 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:39:21.565  INFO 29644 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:39:21.586  INFO 29644 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:39:21.587  INFO 29644 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:39:22.029  INFO 29644 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:39:22.091  INFO 29644 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2024-03-31 17:39:22.549  INFO 29644 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:39:22.555  INFO 29644 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:39:22.556  INFO 29644 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:39:22.610  INFO 29644 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:39:22.611  INFO 29644 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1024 ms
2024-03-31 17:39:22.726  INFO 29644 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:39:22.754  INFO 29644 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:39:22.832  INFO 29644 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:39:22.879  INFO 29644 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:39:23.068  INFO 29644 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:39:23.077  INFO 29644 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:39:23.561  INFO 29644 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:39:23.566  INFO 29644 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:39:24.318  WARN 29644 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:39:24.544  INFO 29644 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:39:24.864  INFO 29644 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:39:24.897  INFO 29644 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:39:24.905  INFO 29644 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.644 seconds (JVM running for 4.452)
2024-03-31 17:39:31.935  INFO 29644 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:39:31.936  INFO 29644 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:39:31.937  INFO 29644 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:39:32.544  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:39:32.557  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:39:32.558  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:32.936  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@481d7865, org.apache.catalina.connector.ResponseFacade@5f3241ea]}
2024-03-31 17:39:33.264  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:39:33.265  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:38.971  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@5f3241ea, hyf, hyfhsy, 5seu, org.apache.catalina.session.StandardSessionFacade@82627e2, {}]}
2024-03-31 17:39:39.002 DEBUG 29644 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:39:39.007 DEBUG 29644 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:39:39.017 DEBUG 29644 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:39:39.023  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:39:39.023  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:39.044  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:39:39.123  WARN 29644 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:39:39.134  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:39:39.134  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:40.581  INFO 29644 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:39:40.587  INFO 29644 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:39:40.588  INFO 29644 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:40.904  INFO 29644 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:40.909 DEBUG 29644 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:39:40.910 DEBUG 29644 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:39:40.921 DEBUG 29644 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:39:40.925  INFO 29644 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:39:40.967  INFO 29644 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:41.021  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:41.022 DEBUG 29644 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:39:41.022 DEBUG 29644 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:39:41.025 DEBUG 29644 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:39:41.025  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:39:41.038  INFO 29644 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:41.067  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:41.068 DEBUG 29644 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:39:41.070 DEBUG 29644 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:39:41.072 DEBUG 29644 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:39:41.072  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:39:41.073  INFO 29644 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:41.128  INFO 29644 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:41.130 DEBUG 29644 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:39:41.130 DEBUG 29644 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:39:41.132 DEBUG 29644 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:39:41.133  INFO 29644 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:39:41.134  INFO 29644 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:46.559  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@5230e0aa, org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:46.561 DEBUG 29644 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:39:46.562 DEBUG 29644 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:39:46.564 DEBUG 29644 --- [http-nio-8080-exec-4] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:39:46.565  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:39:46.575  INFO 29644 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:39:51.566  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@5230e0aa, org.apache.catalina.session.StandardSessionFacade@82627e2]}
2024-03-31 17:39:51.567 DEBUG 29644 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:39:51.568 DEBUG 29644 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:39:51.570 DEBUG 29644 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:39:51.570  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:39:51.571  INFO 29644 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:40:42.613  INFO 29644 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:40:42.616  INFO 29644 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:40:42.632  INFO 29644 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:40:45.915  INFO 34616 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 34616 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:40:45.916 DEBUG 34616 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:40:45.916  INFO 34616 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:40:45.941  INFO 34616 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:40:45.941  INFO 34616 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:40:46.386  INFO 34616 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:40:46.446  INFO 34616 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2024-03-31 17:40:46.989  INFO 34616 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:40:46.996  INFO 34616 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:40:46.996  INFO 34616 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:40:47.060  INFO 34616 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:40:47.061  INFO 34616 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1120 ms
2024-03-31 17:40:47.209  INFO 34616 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:40:47.246  INFO 34616 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:40:47.317  INFO 34616 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:40:47.373  INFO 34616 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:40:47.630  INFO 34616 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:40:47.643  INFO 34616 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:40:48.217  INFO 34616 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:40:48.222  INFO 34616 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:40:49.035  WARN 34616 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:40:49.249  INFO 34616 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:40:49.554  INFO 34616 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:40:49.590  INFO 34616 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:40:49.598  INFO 34616 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.988 seconds (JVM running for 4.817)
2024-03-31 17:40:54.486  INFO 34616 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:40:54.487  INFO 34616 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:40:54.488  INFO 34616 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:40:57.018  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:40:57.027  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:40:57.027  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:40:57.252  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@6e59769a, org.apache.catalina.connector.ResponseFacade@8d7406f]}
2024-03-31 17:40:57.486  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:40:57.486  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:02.049  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@8d7406f, hyf, hyfhsy, brnp, org.apache.catalina.session.StandardSessionFacade@288d3d2e, {}]}
2024-03-31 17:41:02.073 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:41:02.077 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:41:02.084 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:41:02.088  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:41:02.088  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:02.107  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:41:02.164  WARN 34616 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:41:02.172  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:41:02.172  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:04.281  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:41:04.287  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:41:04.288  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:04.480  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:04.482 DEBUG 34616 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:41:04.483 DEBUG 34616 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:41:04.485 DEBUG 34616 --- [http-nio-8080-exec-3] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 17:41:04.486  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:41:04.491  INFO 34616 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:04.522  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:04.523 DEBUG 34616 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:41:04.523 DEBUG 34616 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:41:04.524 DEBUG 34616 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:41:04.525  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:41:04.532  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:04.554  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:04.555 DEBUG 34616 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:41:04.556 DEBUG 34616 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:41:04.558 DEBUG 34616 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:41:04.558  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 17:41:04.559  INFO 34616 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:04.646  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:04.647 DEBUG 34616 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:41:04.648 DEBUG 34616 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:41:04.650 DEBUG 34616 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:41:04.650  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:41:04.651  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:09.361  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[L, org.apache.catalina.connector.ResponseFacade@8d7406f, org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:09.363 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:41:09.363 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), L(String), L(String), L(String), L(String), L(String), L(String)
2024-03-31 17:41:09.366 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:41:09.366  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, nickname=L., signature=学习永无止境, isFriend=false, isMe=false), SearchVO(userId=6, username=xzl, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_8.jpg, nickname=Solar, signature=学习永无止境, isFriend=false, isMe=false)]
2024-03-31 17:41:09.370  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:13.202  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[卡夫卡, org.apache.catalina.connector.ResponseFacade@8d7406f, org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:13.203 DEBUG 34616 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:41:13.205 DEBUG 34616 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String), 卡夫卡(String)
2024-03-31 17:41:13.207 DEBUG 34616 --- [http-nio-8080-exec-6] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:41:13.207  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true)]
2024-03-31 17:41:13.207  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:22.579  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[小熊, org.apache.catalina.connector.ResponseFacade@8d7406f, org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:22.580 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:41:22.581 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), 小熊(String), 小熊(String), 小熊(String), 小熊(String), 小熊(String), 小熊(String)
2024-03-31 17:41:22.582 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 1
2024-03-31 17:41:22.582  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, nickname=小熊维尼, signature=生命中最美丽的一天, isFriend=true, isMe=false)]
2024-03-31 17:41:22.583  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:41:29.349  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/search', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.searchUsers', args=[h, org.apache.catalina.connector.ResponseFacade@8d7406f, org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:41:29.350 DEBUG 34616 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==>  Preparing: SELECT DISTINCT u.id AS user_id, u.username, u.avatar, u.nickname, u.signature, CASE WHEN u.id IN (f.user1id, f.user2id) THEN 1 ELSE 0 END AS is_friend, CASE WHEN u.id = ? THEN 1 ELSE 0 END AS is_me FROM t_user AS u LEFT JOIN (SELECT DISTINCT user1id, user2id FROM t_friend WHERE user1id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%") OR user2id IN (SELECT id FROM t_user WHERE username LIKE "%" ? "%" OR nickname LIKE "%" ? "%")) AS f ON u.id IN (f.user1id, f.user2id) WHERE u.username LIKE "%" ? "%" OR u.nickname LIKE "%" ? "%"
2024-03-31 17:41:29.351 DEBUG 34616 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : ==> Parameters: 1(Long), h(String), h(String), h(String), h(String), h(String), h(String)
2024-03-31 17:41:29.353 DEBUG 34616 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.searchUser      : <==      Total: 2
2024-03-31 17:41:29.353  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [SearchVO(userId=1, username=hyf, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, nickname=卡夫卡, signature=风吹开哪页读哪页，哪页读不懂撕哪页, isFriend=true, isMe=true), SearchVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, nickname=小熊维尼, signature=生命中最美丽的一天, isFriend=true, isMe=false)]
2024-03-31 17:41:29.353  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:09.637  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 5, org.apache.catalina.connector.ResponseFacade@8d7406f]}
2024-03-31 17:42:09.646 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 17:42:09.647 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 17:42:09.648 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 17:42:09.650 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 17:42:09.651 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 17:42:09.657 DEBUG 34616 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 17:42:09.657 DEBUG 34616 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 17:42:09.658 DEBUG 34616 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 5(Long)
2024-03-31 17:42:09.659 DEBUG 34616 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 17:42:09.659  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:42:09.659  INFO 34616 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:09.771  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:09.771 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:42:09.772 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:42:09.773 DEBUG 34616 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 17:42:09.773  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 17:42:09.774  INFO 34616 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:09.783  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:09.783 DEBUG 34616 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:42:09.783 DEBUG 34616 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:42:09.785 DEBUG 34616 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 17:42:09.786  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:42:09.787  INFO 34616 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:09.797  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:09.798 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:42:09.798 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:42:09.800 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:42:09.800  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 17:42:09.800  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:44.212  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:42:44.212  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:42:44.212  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:44.439  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:44.440 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:42:44.441 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:42:44.443 DEBUG 34616 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 17:42:44.444  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:42:44.444  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:44.466  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:44.466 DEBUG 34616 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:42:44.467 DEBUG 34616 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:42:44.469 DEBUG 34616 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:42:44.470  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:42:44.470  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:44.564  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:44.565 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:42:44.566 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:42:44.567 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:42:44.570  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 17:42:44.570  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:42:44.646  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:42:44.646 DEBUG 34616 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:42:44.647 DEBUG 34616 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:42:44.651 DEBUG 34616 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:42:44.652  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=我是一只羊, nickname=小熊维尼)
2024-03-31 17:42:44.652  INFO 34616 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:51:08.093  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:51:08.094  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:51:08.094  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:51:08.398  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:51:08.400 DEBUG 34616 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:51:08.400 DEBUG 34616 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:51:08.403 DEBUG 34616 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 17:51:08.403  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:51:08.404  INFO 34616 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:51:08.434  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:51:08.434 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:51:08.434 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:51:08.436 DEBUG 34616 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:51:08.436  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:51:08.436  INFO 34616 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:51:08.559  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:51:08.559 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:51:08.559 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:51:08.560 DEBUG 34616 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:51:08.562  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 17:51:08.562  INFO 34616 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:51:08.632  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@288d3d2e]}
2024-03-31 17:51:08.632 DEBUG 34616 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:51:08.634 DEBUG 34616 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:51:08.636 DEBUG 34616 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:51:08.636  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 17:51:08.636  INFO 34616 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:23.784  INFO 34616 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:54:23.787  INFO 34616 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:54:23.796  INFO 34616 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:54:29.085  INFO 29764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 29764 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:54:29.085 DEBUG 29764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:54:29.085  INFO 29764 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:54:29.108  INFO 29764 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:54:29.108  INFO 29764 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:54:29.570  INFO 29764 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:54:29.623  INFO 29764 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 47 ms. Found 5 JPA repository interfaces.
2024-03-31 17:54:30.073  INFO 29764 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:54:30.079  INFO 29764 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:54:30.079  INFO 29764 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:54:30.138  INFO 29764 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:54:30.139  INFO 29764 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1030 ms
2024-03-31 17:54:30.245  INFO 29764 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:54:30.269  INFO 29764 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:54:30.351  INFO 29764 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:54:30.417  INFO 29764 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:54:30.623  INFO 29764 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:54:30.634  INFO 29764 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:54:31.169  INFO 29764 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:54:31.175  INFO 29764 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:54:31.992  WARN 29764 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:54:32.261  INFO 29764 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:54:32.607  INFO 29764 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:54:32.648  INFO 29764 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:54:32.662  INFO 29764 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.902 seconds (JVM running for 4.67)
2024-03-31 17:54:36.095  INFO 29764 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:54:36.096  INFO 29764 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:54:36.097  INFO 29764 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:54:36.204  INFO 29764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:54:36.212  INFO 29764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:54:36.212  INFO 29764 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:36.436  INFO 29764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@e114bfc, org.apache.catalina.connector.ResponseFacade@a4f52fc]}
2024-03-31 17:54:36.653  INFO 29764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:54:36.653  INFO 29764 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:41.997  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@a4f52fc, hyf, hyfhsy, kirt, org.apache.catalina.session.StandardSessionFacade@5f9f7803, {}]}
2024-03-31 17:54:42.026 DEBUG 29764 --- [http-nio-8080-exec-9] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:54:42.033 DEBUG 29764 --- [http-nio-8080-exec-9] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:54:42.041 DEBUG 29764 --- [http-nio-8080-exec-9] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:54:42.049  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:54:42.049  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:42.072  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:54:42.154  WARN 29764 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:54:42.165  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:54:42.165  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:44.033  INFO 29764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:54:44.037  INFO 29764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:54:44.038  INFO 29764 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:44.461  INFO 29764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@5f9f7803]}
2024-03-31 17:54:44.463 DEBUG 29764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:54:44.464 DEBUG 29764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:54:44.466 DEBUG 29764 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 17:54:44.467  INFO 29764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:54:44.474  INFO 29764 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:44.526  INFO 29764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@5f9f7803]}
2024-03-31 17:54:44.527 DEBUG 29764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:54:44.527 DEBUG 29764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:54:44.530 DEBUG 29764 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:54:44.530  INFO 29764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:54:44.542  INFO 29764 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:44.579  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@5f9f7803]}
2024-03-31 17:54:44.580 DEBUG 29764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:54:44.581 DEBUG 29764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:54:44.583 DEBUG 29764 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:54:44.583  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 17:54:44.584  INFO 29764 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:54:44.681  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@5f9f7803]}
2024-03-31 17:54:44.682 DEBUG 29764 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:54:44.683 DEBUG 29764 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:54:44.685 DEBUG 29764 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:54:44.685  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 17:54:44.686  INFO 29764 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:04.330  INFO 29764 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:56:04.335  INFO 29764 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:56:04.350  INFO 29764 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 17:56:07.170  INFO 32468 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 32468 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 17:56:07.170 DEBUG 32468 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 17:56:07.171  INFO 32468 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 17:56:07.195  INFO 32468 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 17:56:07.195  INFO 32468 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 17:56:07.622  INFO 32468 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 17:56:07.678  INFO 32468 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2024-03-31 17:56:08.109  INFO 32468 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 17:56:08.118  INFO 32468 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 17:56:08.118  INFO 32468 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 17:56:08.181  INFO 32468 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 17:56:08.182  INFO 32468 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 986 ms
2024-03-31 17:56:08.295  INFO 32468 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 17:56:08.322  INFO 32468 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 17:56:08.409  INFO 32468 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 17:56:08.467  INFO 32468 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 17:56:08.698  INFO 32468 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 17:56:08.710  INFO 32468 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 17:56:09.242  INFO 32468 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 17:56:09.248  INFO 32468 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:56:09.890  WARN 32468 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 17:56:10.086  INFO 32468 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 17:56:10.377  INFO 32468 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 17:56:10.408  INFO 32468 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 17:56:10.416  INFO 32468 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.543 seconds (JVM running for 4.268)
2024-03-31 17:56:14.173  INFO 32468 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 17:56:14.175  INFO 32468 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 17:56:14.176  INFO 32468 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 17:56:14.295  INFO 32468 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 17:56:14.302  INFO 32468 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 17:56:14.302  INFO 32468 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:14.536  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@2696e663, org.apache.catalina.connector.ResponseFacade@7a1c3792]}
2024-03-31 17:56:14.744  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 17:56:14.744  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:29.618  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@7a1c3792, hyf, hyfhsy, ahxv, org.apache.catalina.session.StandardSessionFacade@1a108b21, {}]}
2024-03-31 17:56:29.650 DEBUG 32468 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 17:56:29.660 DEBUG 32468 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 17:56:29.672 DEBUG 32468 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 17:56:29.677  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 17:56:29.678  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:29.700  INFO 32468 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 17:56:29.785  WARN 32468 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 17:56:29.796  INFO 32468 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 17:56:29.797  INFO 32468 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:31.919  INFO 32468 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 17:56:31.924  INFO 32468 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 17:56:31.924  INFO 32468 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:32.229  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@1a108b21]}
2024-03-31 17:56:32.231 DEBUG 32468 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 17:56:32.232 DEBUG 32468 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 17:56:32.236 DEBUG 32468 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 17:56:32.239  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 17:56:32.248  INFO 32468 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:32.368  INFO 32468 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@1a108b21]}
2024-03-31 17:56:32.369 DEBUG 32468 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 17:56:32.370 DEBUG 32468 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 17:56:32.372 DEBUG 32468 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 17:56:32.372  INFO 32468 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 17:56:32.381  INFO 32468 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:32.516  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@1a108b21]}
2024-03-31 17:56:32.517 DEBUG 32468 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 17:56:32.518 DEBUG 32468 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 17:56:32.521 DEBUG 32468 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 17:56:32.522  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 17:56:32.523  INFO 32468 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:32.619  INFO 32468 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@1a108b21]}
2024-03-31 17:56:32.621 DEBUG 32468 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 17:56:32.621 DEBUG 32468 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 17:56:32.625 DEBUG 32468 --- [http-nio-8080-exec-5] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 17:56:32.625  INFO 32468 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 17:56:32.626  INFO 32468 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 17:56:52.852  INFO 32468 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 17:56:52.855  INFO 32468 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 17:56:52.866  INFO 32468 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 20:32:43.288  INFO 23708 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 23708 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 20:32:43.289 DEBUG 23708 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 20:32:43.289  INFO 23708 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 20:32:43.311  INFO 23708 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 20:32:43.311  INFO 23708 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 20:32:43.777  INFO 23708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 20:32:43.834  INFO 23708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2024-03-31 20:32:44.295  INFO 23708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 20:32:44.301  INFO 23708 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 20:32:44.302  INFO 23708 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 20:32:44.370  INFO 23708 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 20:32:44.370  INFO 23708 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1059 ms
2024-03-31 20:32:44.480  INFO 23708 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 20:32:44.507  INFO 23708 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 20:32:44.583  INFO 23708 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 20:32:44.637  INFO 23708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 20:32:44.878  INFO 23708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 20:32:44.889  INFO 23708 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 20:32:45.540  INFO 23708 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 20:32:45.547  INFO 23708 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 20:32:46.645  WARN 23708 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 20:32:46.881  INFO 23708 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 20:32:47.178  INFO 23708 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 20:32:47.213  INFO 23708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 20:32:47.221  INFO 23708 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.279 seconds (JVM running for 5.165)
2024-03-31 20:33:05.692  INFO 23708 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 20:33:05.692  INFO 23708 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 20:33:05.693  INFO 23708 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2024-03-31 20:33:05.928  WARN 23708 --- [http-nio-8080-exec-1] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [219] milliseconds.
2024-03-31 20:33:06.482  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 20:33:06.490  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 20:33:06.490  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:06.715  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@6a7ce5a5, org.apache.catalina.connector.ResponseFacade@325574cd]}
2024-03-31 20:33:06.933  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:33:06.934  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:12.900  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@325574cd, hyf, hyfhsy, 0w8c, org.apache.catalina.session.StandardSessionFacade@30dfefd3, {}]}
2024-03-31 20:33:12.924 DEBUG 23708 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 20:33:12.928 DEBUG 23708 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 20:33:12.935 DEBUG 23708 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 20:33:12.939  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 20:33:12.940  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:12.959  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 20:33:13.019  WARN 23708 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 20:33:13.026  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 20:33:13.026  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:14.910  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:33:14.914  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:33:14.914  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:15.158  INFO 23708 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:15.161 DEBUG 23708 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:33:15.162 DEBUG 23708 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:33:15.165 DEBUG 23708 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:33:15.167  INFO 23708 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:33:15.174  INFO 23708 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:15.209  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:15.209 DEBUG 23708 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:33:15.210 DEBUG 23708 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:33:15.211 DEBUG 23708 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:33:15.213  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:33:15.219  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:15.294  INFO 23708 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:15.294 DEBUG 23708 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:33:15.294 DEBUG 23708 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:33:15.296 DEBUG 23708 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:33:15.296  INFO 23708 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:33:15.296  INFO 23708 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:15.335  INFO 23708 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:15.336 DEBUG 23708 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:33:15.336 DEBUG 23708 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:33:15.338 DEBUG 23708 --- [http-nio-8080-exec-8] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:33:15.339  INFO 23708 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:33:15.339  INFO 23708 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:38.657  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteApply', args=[5, org.apache.catalina.connector.ResponseFacade@28e33997]}
2024-03-31 20:33:38.657 DEBUG 23708 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 20:33:38.658 DEBUG 23708 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 5(Long)
2024-03-31 20:33:38.659 DEBUG 23708 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 20:33:38.659  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:33:38.660  INFO 23708 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:38.673  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:38.674 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:33:38.674 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:33:38.674 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 20:33:38.675  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 20:33:38.675  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:59.572  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:33:59.572  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:33:59.572  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:59.843  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:59.844 DEBUG 23708 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:33:59.845 DEBUG 23708 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:33:59.847 DEBUG 23708 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:33:59.847  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:33:59.848  INFO 23708 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:33:59.894  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:33:59.894 DEBUG 23708 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:33:59.894 DEBUG 23708 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:33:59.897 DEBUG 23708 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:33:59.897  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:33:59.897  INFO 23708 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:34:00.055  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:34:00.058 DEBUG 23708 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:34:00.059 DEBUG 23708 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:34:00.068 DEBUG 23708 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:34:00.068  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:34:00.069  INFO 23708 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:34:00.118  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:34:00.118 DEBUG 23708 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:34:00.119 DEBUG 23708 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:34:00.121 DEBUG 23708 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:34:00.122  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:34:00.123  INFO 23708 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:34:26.870  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/often', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendsOften', args=[org.apache.catalina.session.StandardSessionFacade@30dfefd3]}
2024-03-31 20:34:26.872 DEBUG 23708 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==>  Preparing: SELECT u.id user_id, u.description, u.username, u.nickname, u.avatar FROM t_user u JOIN (SELECT sender_username, recipient_username, COUNT(*) AS recent_chat_count FROM t_chat WHERE sender_username = ? AND send_time >= CURDATE() - INTERVAL 30 DAY GROUP BY sender_username, recipient_username ORDER BY recent_chat_count DESC) c WHERE c.recipient_username = u.username;
2024-03-31 20:34:26.872 DEBUG 23708 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : ==> Parameters: hyf(String)
2024-03-31 20:34:26.874 DEBUG 23708 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.friendsOften  : <==      Total: 3
2024-03-31 20:34:26.874  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山), FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan)]
2024-03-31 20:34:26.875  INFO 23708 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:34:38.575  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/4', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[4, {}]}
2024-03-31 20:34:38.580 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 20:34:38.580 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 4(Long)
2024-03-31 20:34:38.583 DEBUG 23708 --- [http-nio-8080-exec-1] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 20:34:38.584 DEBUG 23708 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 20:34:38.584 DEBUG 23708 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 4(Long), 4(Long)
2024-03-31 20:34:38.587 DEBUG 23708 --- [http-nio-8080-exec-1] c.j.d.F.findJoinForumsByUserId           : <==      Total: 1
2024-03-31 20:34:38.596  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 20:34:38.597  INFO 23708 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:13.849  INFO 23708 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 20:47:13.852  INFO 23708 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 20:47:13.861  INFO 23708 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 20:47:16.536  INFO 32648 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 32648 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 20:47:16.536 DEBUG 32648 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 20:47:16.537  INFO 32648 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 20:47:16.560  INFO 32648 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 20:47:16.560  INFO 32648 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 20:47:17.130  INFO 32648 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 20:47:17.195  INFO 32648 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2024-03-31 20:47:17.716  INFO 32648 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 20:47:17.724  INFO 32648 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 20:47:17.724  INFO 32648 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 20:47:17.808  INFO 32648 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 20:47:17.808  INFO 32648 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1247 ms
2024-03-31 20:47:17.981  INFO 32648 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 20:47:18.016  INFO 32648 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 20:47:18.092  INFO 32648 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 20:47:18.151  INFO 32648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 20:47:18.396  INFO 32648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 20:47:18.407  INFO 32648 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 20:47:18.999  INFO 32648 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 20:47:19.005  INFO 32648 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 20:47:19.732  WARN 32648 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 20:47:19.930  INFO 32648 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 20:47:20.201  INFO 32648 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 20:47:20.245  INFO 32648 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 20:47:20.256  INFO 32648 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 4.03 seconds (JVM running for 4.779)
2024-03-31 20:47:36.350  INFO 32648 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 20:47:36.352  INFO 32648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 20:47:36.353  INFO 32648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 20:47:37.118  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 20:47:37.127  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 20:47:37.127  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:37.355  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@10600da3, org.apache.catalina.connector.ResponseFacade@70862d08]}
2024-03-31 20:47:37.573  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:47:37.573  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:42.884  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@70862d08, hyf, hyfhsy, xhdm, org.apache.catalina.session.StandardSessionFacade@4e56d012, {}]}
2024-03-31 20:47:42.907 DEBUG 32648 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 20:47:42.911 DEBUG 32648 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 20:47:42.918 DEBUG 32648 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 20:47:42.923  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 20:47:42.923  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:42.942  INFO 32648 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 20:47:42.999  WARN 32648 --- [http-nio-8080-exec-7] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 20:47:43.007  INFO 32648 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 20:47:43.007  INFO 32648 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:44.836  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:47:44.838  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:47:44.838  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:45.045  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:45.048 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:47:45.048 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:47:45.050 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:47:45.052  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:47:45.057  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:45.089  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:45.089 DEBUG 32648 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:47:45.089 DEBUG 32648 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:47:45.091 DEBUG 32648 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:47:45.091  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:47:45.104  INFO 32648 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:45.135  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:45.135 DEBUG 32648 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:47:45.136 DEBUG 32648 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:47:45.137 DEBUG 32648 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:47:45.137  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:47:45.138  INFO 32648 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:45.182  INFO 32648 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:45.182 DEBUG 32648 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:47:45.183 DEBUG 32648 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:47:45.185 DEBUG 32648 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:47:45.186  INFO 32648 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:47:45.186  INFO 32648 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:57.431  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:47:57.431  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:47:57.431  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:57.649  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:57.650 DEBUG 32648 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:47:57.651 DEBUG 32648 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:47:57.651 DEBUG 32648 --- [http-nio-8080-exec-4] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:47:57.651  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:47:57.653  INFO 32648 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:57.672  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:57.673 DEBUG 32648 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:47:57.673 DEBUG 32648 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:47:57.675 DEBUG 32648 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:47:57.676  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:47:57.676  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:57.706  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:57.708 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:47:57.708 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:47:57.709 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:47:57.710  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:47:57.710  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:47:57.787  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:47:57.787 DEBUG 32648 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:47:57.788 DEBUG 32648 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:47:57.789 DEBUG 32648 --- [http-nio-8080-exec-3] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:47:57.790  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:47:57.791  INFO 32648 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:50:07.758  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:50:07.758  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:50:07.758  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:50:08.031  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:50:08.032 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:50:08.032 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:50:08.034 DEBUG 32648 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:50:08.034  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:50:08.035  INFO 32648 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:50:08.064  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:50:08.064 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:50:08.065 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:50:08.066 DEBUG 32648 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:50:08.067  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:50:08.067  INFO 32648 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:50:08.174  INFO 32648 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:50:08.174 DEBUG 32648 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:50:08.174 DEBUG 32648 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:50:08.176 DEBUG 32648 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:50:08.177  INFO 32648 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:50:08.177  INFO 32648 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:50:08.242  INFO 32648 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@4e56d012]}
2024-03-31 20:50:08.242 DEBUG 32648 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:50:08.244 DEBUG 32648 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:50:08.245 DEBUG 32648 --- [http-nio-8080-exec-10] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:50:08.246  INFO 32648 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:50:08.246  INFO 32648 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:56:41.845  INFO 32648 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 20:56:41.849  INFO 32648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 20:56:41.859  INFO 32648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 20:56:44.754  INFO 14416 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 14416 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 20:56:44.755 DEBUG 14416 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 20:56:44.755  INFO 14416 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 20:56:44.782  INFO 14416 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 20:56:44.782  INFO 14416 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 20:56:45.244  INFO 14416 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 20:56:45.303  INFO 14416 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2024-03-31 20:56:45.767  INFO 14416 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 20:56:45.775  INFO 14416 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 20:56:45.775  INFO 14416 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 20:56:45.834  INFO 14416 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 20:56:45.834  INFO 14416 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1051 ms
2024-03-31 20:56:45.953  INFO 14416 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 20:56:45.981  INFO 14416 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 20:56:46.059  INFO 14416 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 20:56:46.117  INFO 14416 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 20:56:46.347  INFO 14416 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 20:56:46.361  INFO 14416 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 20:56:47.056  INFO 14416 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 20:56:47.063  INFO 14416 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 20:56:47.799  WARN 14416 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 20:56:48.018  INFO 14416 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 20:56:48.312  INFO 14416 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 20:56:48.345  INFO 14416 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 20:56:48.352  INFO 14416 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.944 seconds (JVM running for 4.844)
2024-03-31 20:56:53.425  INFO 14416 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 20:56:53.426  INFO 14416 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 20:56:53.427  INFO 14416 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 20:56:54.598  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 20:56:54.607  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 20:56:54.608  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:56:54.833  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@7de0d5ab, org.apache.catalina.connector.ResponseFacade@56607177]}
2024-03-31 20:56:55.051  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:56:55.051  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:01.911  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@56607177, hyf, hyfhsy, r92h, org.apache.catalina.session.StandardSessionFacade@645a0e88, {}]}
2024-03-31 20:57:01.940 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 20:57:01.945 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 20:57:01.955 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 20:57:01.961  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 20:57:01.961  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:01.982  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 20:57:02.059  WARN 14416 --- [http-nio-8080-exec-2] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 20:57:02.070  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 20:57:02.070  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:04.793  INFO 14416 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:57:04.797  INFO 14416 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:57:04.797  INFO 14416 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:05.132  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:05.134 DEBUG 14416 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:57:05.135 DEBUG 14416 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:57:05.136 DEBUG 14416 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:57:05.137  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:57:05.144  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:05.204  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:05.205 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:57:05.205 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:57:05.207 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:57:05.207  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:57:05.216  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:05.302  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:05.302 DEBUG 14416 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:57:05.303 DEBUG 14416 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:57:05.305 DEBUG 14416 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:57:05.305  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:57:05.306  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:05.369  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:05.371 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:57:05.373 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:57:05.376 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:57:05.377  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:57:05.377  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:41.629  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@645a0e88, org.apache.catalina.connector.ResponseFacade@7b7e7c68]}
2024-03-31 20:57:41.630 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 20:57:41.631 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 20:57:41.637 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 20:57:41.637  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:57:41.637  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:41.751  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:41.751 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:57:41.752 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:57:41.754 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 20:57:41.755  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:57:41.755  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:41.765  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:41.766 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:57:41.766 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:57:41.767 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:57:41.768  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 20:57:41.768  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:57:41.776  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:57:41.777 DEBUG 14416 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:57:41.777 DEBUG 14416 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:57:41.779 DEBUG 14416 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:57:41.779  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:57:41.779  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:42.384  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/add', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.addFriend', args=[Friend(id=null, user1Id=1, user2Id=5, user1Nickname=卡夫卡, user2Nickname=, user1Description=一息尚存，战斗不止！, user2Description=, user1Avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg, user2Avatar=, user1Username=hyf, user2Username=), 5, org.apache.catalina.connector.ResponseFacade@7b7e7c68]}
2024-03-31 20:59:42.395 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 20:59:42.395 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 20:59:42.397 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 20:59:42.398 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.saveFriend    : ==>  Preparing: insert into t_friend (user1username, user2username, user1id, user2id, user1description, user2description, user1avatar, user2avatar, user1nickname, user2nickname) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
2024-03-31 20:59:42.400 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.saveFriend    : ==> Parameters: hyf(String), ls(String), 1(Long), 5(Long), 一息尚存，战斗不止！(String), 我是一只猫(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_3.jpg(String), https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg(String), 卡夫卡(String), L.(String)
2024-03-31 20:59:42.402 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.saveFriend    : <==    Updates: 1
2024-03-31 20:59:42.402 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 20:59:42.403 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 5(Long)
2024-03-31 20:59:42.404 DEBUG 14416 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 20:59:42.404  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 20:59:42.404  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:42.430  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:42.431 DEBUG 14416 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:59:42.431 DEBUG 14416 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:59:42.432 DEBUG 14416 --- [http-nio-8080-exec-1] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 20:59:42.433  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 20:59:42.433  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:42.443  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:42.444 DEBUG 14416 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:59:42.444 DEBUG 14416 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:59:42.446 DEBUG 14416 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:59:42.446  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:59:42.447  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:42.456  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:42.457 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:59:42.457 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:59:42.458 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:59:42.459  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:59:42.459  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:53.116  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 20:59:53.117  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 20:59:53.117  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:53.366  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:53.368 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 20:59:53.369 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 20:59:53.371 DEBUG 14416 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 20:59:53.372  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 20:59:53.372  INFO 14416 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:53.406  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:53.407 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 20:59:53.407 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 20:59:53.409 DEBUG 14416 --- [http-nio-8080-exec-4] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 20:59:53.409  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 20:59:53.410  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:53.526  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:53.528 DEBUG 14416 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 20:59:53.531 DEBUG 14416 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 20:59:53.533 DEBUG 14416 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 20:59:53.536  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 20:59:53.537  INFO 14416 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 20:59:53.600  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 20:59:53.601 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 20:59:53.601 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 20:59:53.604 DEBUG 14416 --- [http-nio-8080-exec-2] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 20:59:53.605  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 20:59:53.605  INFO 14416 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:04.836  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteApply', args=[5, org.apache.catalina.connector.ResponseFacade@7b7e7c68]}
2024-03-31 21:00:04.837 DEBUG 14416 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==>  Preparing: delete from t_apply where id = ?
2024-03-31 21:00:04.837 DEBUG 14416 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : ==> Parameters: 5(Long)
2024-03-31 21:00:04.839 DEBUG 14416 --- [http-nio-8080-exec-8] c.j.dao.FriendMapper.deleteApplyById     : <==    Updates: 1
2024-03-31 21:00:04.839  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:00:04.839  INFO 14416 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:04.922  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 21:00:04.923 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 21:00:04.923 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 21:00:04.925 DEBUG 14416 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 0
2024-03-31 21:00:04.925  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : []
2024-03-31 21:00:04.925  INFO 14416 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:22.371  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 21:00:22.371  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 21:00:22.371  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:22.606  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 21:00:22.606 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:00:22.607 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:00:22.614 DEBUG 14416 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 21:00:22.615  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:00:22.615  INFO 14416 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:22.642  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 21:00:22.642 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 21:00:22.643 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 21:00:22.644 DEBUG 14416 --- [http-nio-8080-exec-9] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 21:00:22.645  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 21:00:22.645  INFO 14416 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:22.809  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 21:00:22.810 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:00:22.810 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:00:22.812 DEBUG 14416 --- [http-nio-8080-exec-7] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:00:22.813  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 21:00:22.813  INFO 14416 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:22.844  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@645a0e88]}
2024-03-31 21:00:22.844 DEBUG 14416 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:00:22.845 DEBUG 14416 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:00:22.848 DEBUG 14416 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:00:22.848  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:00:22.848  INFO 14416 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:30.751  INFO 14416 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 21:00:30.754  INFO 14416 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 21:00:30.762  INFO 14416 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2024-03-31 21:00:33.345  INFO 32748 --- [restartedMain] com.jxufe.GuideSystemApplication         : Starting GuideSystemApplication using Java 11.0.19 on Kafka with PID 32748 (D:\MyFiles\JAVA\myProjects\learn-community-system\target\classes started by 19233 in D:\MyFiles\JAVA\myProjects\learn-community-system)
2024-03-31 21:00:33.346 DEBUG 32748 --- [restartedMain] com.jxufe.GuideSystemApplication         : Running with Spring Boot v2.6.4, Spring v5.3.16
2024-03-31 21:00:33.346  INFO 32748 --- [restartedMain] com.jxufe.GuideSystemApplication         : The following 1 profile is active: "dev"
2024-03-31 21:00:33.369  INFO 32748 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-03-31 21:00:33.369  INFO 32748 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-03-31 21:00:33.825  INFO 32748 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-31 21:00:33.886  INFO 32748 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2024-03-31 21:00:34.355  INFO 32748 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2024-03-31 21:00:34.361  INFO 32748 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-03-31 21:00:34.361  INFO 32748 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.58]
2024-03-31 21:00:34.428  INFO 32748 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring embedded WebApplicationContext
2024-03-31 21:00:34.428  INFO 32748 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1058 ms
2024-03-31 21:00:34.533  INFO 32748 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-31 21:00:34.555  INFO 32748 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.5.Final
2024-03-31 21:00:34.636  INFO 32748 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-31 21:00:34.701  INFO 32748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-03-31 21:00:34.943  INFO 32748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-03-31 21:00:34.956  INFO 32748 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2024-03-31 21:00:35.481  INFO 32748 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-31 21:00:35.486  INFO 32748 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 21:00:36.223  WARN 32748 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-31 21:00:36.432  INFO 32748 --- [restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2024-03-31 21:00:36.745  INFO 32748 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2024-03-31 21:00:36.783  INFO 32748 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/dev'
2024-03-31 21:00:36.790  INFO 32748 --- [restartedMain] com.jxufe.GuideSystemApplication         : Started GuideSystemApplication in 3.776 seconds (JVM running for 4.533)
2024-03-31 21:00:48.583  INFO 32748 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/dev]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-31 21:00:48.584  INFO 32748 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-03-31 21:00:48.585  INFO 32748 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-03-31 21:00:49.774  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 21:00:49.790  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 21:00:49.791  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:50.196  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@1ba5ea75, org.apache.catalina.connector.ResponseFacade@3cd592e7]}
2024-03-31 21:00:50.560  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:00:50.560  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:57.430  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@3cd592e7, hyf, hyfhsy, x81, org.apache.catalina.session.StandardSessionFacade@3df00a3d, {}]}
2024-03-31 21:00:57.431  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : redirect:/login
2024-03-31 21:00:57.431  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:57.462  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 21:00:57.463  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 21:00:57.463  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:00:57.505  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@2ff73ca3, org.apache.catalina.connector.ResponseFacade@2130c72d]}
2024-03-31 21:00:57.515  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:00:57.516  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:02.795  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@2130c72d, hyf, hyfhsy, 7zm1, org.apache.catalina.session.StandardSessionFacade@3df00a3d, {}]}
2024-03-31 21:01:02.795  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : redirect:/login
2024-03-31 21:01:02.795  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:02.805  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLoginPage', args=[]}
2024-03-31 21:01:02.805  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : login
2024-03-31 21:01:02.806  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:02.844  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/codeImage', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.VerificationController.doGet', args=[org.apache.catalina.connector.RequestFacade@1ba5ea75, org.apache.catalina.connector.ResponseFacade@3cd592e7]}
2024-03-31 21:01:02.851  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:01:02.851  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:07.417  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/login/success', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.UserController.doLogin', args=[org.apache.catalina.connector.ResponseFacade@3cd592e7, hyf, hyfhsy, f2q1, org.apache.catalina.session.StandardSessionFacade@3df00a3d, {}]}
2024-03-31 21:01:07.450 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==>  Preparing: select * from t_user where username = ? and password = ?
2024-03-31 21:01:07.456 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : ==> Parameters: hyf(String), f3b53cbd7fe408bb281efaf5d94f05c2(String)
2024-03-31 21:01:07.464 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.d.U.findByUsernameAndPassword        : <==      Total: 1
2024-03-31 21:01:07.470  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : redirect:/user_index
2024-03-31 21:01:07.470  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:07.484  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/user_index', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.IndexController.doUserIndex', args=[Page request [number: 0, size 10, sort: updateTime: DESC], {}]}
2024-03-31 21:01:07.567  WARN 32748 --- [http-nio-8080-exec-9] org.hibernate.orm.deprecation            : HHH90000016: Found use of deprecated 'collection property' syntax in HQL/JPQL query [t.resources.size]; use collection function syntax instead [size(t.resources)].
2024-03-31 21:01:07.578  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : user_index
2024-03-31 21:01:07.578  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:10.255  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 21:01:10.260  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 21:01:10.261  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:10.547  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:10.549 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:01:10.549 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:01:10.552 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 4
2024-03-31 21:01:10.554  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=5, username=ls, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, description=我是一只猫, nickname=L.), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:01:10.560  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:10.663  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:10.664 DEBUG 32748 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 21:01:10.665 DEBUG 32748 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 21:01:10.667 DEBUG 32748 --- [http-nio-8080-exec-6] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 21:01:10.667  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 21:01:10.678  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:10.708  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:10.708 DEBUG 32748 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:01:10.709 DEBUG 32748 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:01:10.711 DEBUG 32748 --- [http-nio-8080-exec-10] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:01:10.712  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : 4
2024-03-31 21:01:10.712  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:10.859  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:10.861 DEBUG 32748 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:01:10.861 DEBUG 32748 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:01:10.863 DEBUG 32748 --- [http-nio-8080-exec-9] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:01:10.863  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:01:10.864  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:15.373  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/userOtherAbout/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.AboutController.doUserOtherAbout', args=[5, {}]}
2024-03-31 21:01:15.377 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : ==>  Preparing: select * from t_user where id = ?
2024-03-31 21:01:15.378 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : ==> Parameters: 5(Long)
2024-03-31 21:01:15.380 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.UserMapper.findUserById    : <==      Total: 1
2024-03-31 21:01:15.381 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : ==>  Preparing: SELECT tt.* FROM (SELECT t_forum.*, IFNULL(t_forum_users.users_id, 0) as uid FROM t_forum LEFT JOIN t_forum_users ON t_forum_users.users_id = ? AND t_forum_users.forums_id = t_forum.id) AS tt WHERE uid = ?
2024-03-31 21:01:15.381 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : ==> Parameters: 5(Long), 5(Long)
2024-03-31 21:01:15.385 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.d.F.findJoinForumsByUserId           : <==      Total: 0
2024-03-31 21:01:15.395  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : user_other_about
2024-03-31 21:01:15.396  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.689  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@3df00a3d, org.apache.catalina.connector.ResponseFacade@60354d66]}
2024-03-31 21:01:36.689  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@3df00a3d, org.apache.catalina.connector.ResponseFacade@37799e7d]}
2024-03-31 21:01:36.689  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/delete/5', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.deleteFriend', args=[5, org.apache.catalina.session.StandardSessionFacade@3df00a3d, org.apache.catalina.connector.ResponseFacade@2130c72d]}
2024-03-31 21:01:36.690 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 21:01:36.690 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 21:01:36.690 DEBUG 32748 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.deleteFriendById    : ==>  Preparing: delete from t_friend where (user1id = ? and user2id = ?) OR (user1id = ? and user2id = ?)
2024-03-31 21:01:36.691 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 21:01:36.691 DEBUG 32748 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 21:01:36.691 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : ==> Parameters: 5(Long), 1(Long), 1(Long), 5(Long)
2024-03-31 21:01:36.697 DEBUG 32748 --- [http-nio-8080-exec-7] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 1
2024-03-31 21:01:36.697  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:01:36.697  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.763 DEBUG 32748 --- [http-nio-8080-exec-6] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 0
2024-03-31 21:01:36.763  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:01:36.763  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.765 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.deleteFriendById    : <==    Updates: 0
2024-03-31 21:01:36.765  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : null
2024-03-31 21:01:36.765  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.770  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.771 DEBUG 32748 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:01:36.772 DEBUG 32748 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:01:36.773 DEBUG 32748 --- [http-nio-8080-exec-9] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 21:01:36.774  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:01:36.774  INFO 32748 --- [http-nio-8080-exec-9] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.777  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.777 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:01:36.778 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:01:36.780 DEBUG 32748 --- [http-nio-8080-exec-5] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 21:01:36.780  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:01:36.781  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.784  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.784 DEBUG 32748 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:01:36.784  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.784 DEBUG 32748 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:01:36.784 DEBUG 32748 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:01:36.784 DEBUG 32748 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:01:36.785 DEBUG 32748 --- [http-nio-8080-exec-2] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:01:36.785 DEBUG 32748 --- [http-nio-8080-exec-1] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 21:01:36.785  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 21:01:36.785  INFO 32748 --- [http-nio-8080-exec-2] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.785  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:01:36.786  INFO 32748 --- [http-nio-8080-exec-1] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.789  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.790 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:01:36.790 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:01:36.791 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:01:36.792  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 21:01:36.792  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.793  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.795 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:01:36.796  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.796 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:01:36.796 DEBUG 32748 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:01:36.797 DEBUG 32748 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:01:36.798 DEBUG 32748 --- [http-nio-8080-exec-3] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:01:36.798 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:01:36.799  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 21:01:36.799  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:01:36.799  INFO 32748 --- [http-nio-8080-exec-3] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.799  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.802  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.802 DEBUG 32748 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:01:36.803 DEBUG 32748 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:01:36.805 DEBUG 32748 --- [http-nio-8080-exec-7] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:01:36.806  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:01:36.806  INFO 32748 --- [http-nio-8080-exec-7] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:36.809  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:36.810 DEBUG 32748 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:01:36.810 DEBUG 32748 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:01:36.813 DEBUG 32748 --- [http-nio-8080-exec-6] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:01:36.814  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:01:36.814  INFO 32748 --- [http-nio-8080-exec-6] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:43.756  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.doFriends', args=[]}
2024-03-31 21:01:43.757  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : friends
2024-03-31 21:01:43.757  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:44.011  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendListByUser', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:44.012 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==>  Preparing: SELECT IF(user1id = ?, user2id, user1id) AS user_id, IF(user1id = ?, user2username, user1username) AS username, IF(user1id = ?, user2avatar, user1avatar) AS avatar, IF(user1id = ?, user2description, user1description) AS description, IF(user1id = ?, user2nickname, user1nickname) AS nickname FROM t_friend WHERE user1id = ? OR user2id = ? order by nickname ASC
2024-03-31 21:01:44.013 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : ==> Parameters: 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long), 1(Long)
2024-03-31 21:01:44.016 DEBUG 32748 --- [http-nio-8080-exec-10] c.j.dao.FriendMapper.friendListByUser    : <==      Total: 3
2024-03-31 21:01:44.017  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : method : [FriendVO(userId=4, username=root, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_7.jpg, description=我是一只羊, nickname=Kafka_Fan), FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼), FriendVO(userId=3, username=zyd, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_10.jpg, description=我是一只羊, nickname=断背山)]
2024-03-31 21:01:44.017  INFO 32748 --- [http-nio-8080-exec-10] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:44.054  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/apply/list', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplyList', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:44.056 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==>  Preparing: select * from t_apply where recipient_id = ? ORDER BY apply_time DESC
2024-03-31 21:01:44.056 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : ==> Parameters: 1(Long)
2024-03-31 21:01:44.058 DEBUG 32748 --- [http-nio-8080-exec-5] com.jxufe.dao.FriendMapper.applyList     : <==      Total: 1
2024-03-31 21:01:44.058  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : method : [Apply(id=5, senderId=5, recipientId=1, senderNickname=L., senderAvatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_5.jpg, applyTime=Sun Mar 31 15:31:57 CST 2024)]
2024-03-31 21:01:44.058  INFO 32748 --- [http-nio-8080-exec-5] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:44.130  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/count', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.getApplys', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:44.131 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==>  Preparing: select count(*) from t_friend where user1id = ? or user2id = ?;
2024-03-31 21:01:44.131 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : ==> Parameters: 1(Long), 1(Long)
2024-03-31 21:01:44.133 DEBUG 32748 --- [http-nio-8080-exec-8] com.jxufe.dao.FriendMapper.getCount      : <==      Total: 1
2024-03-31 21:01:44.133  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : method : 3
2024-03-31 21:01:44.133  INFO 32748 --- [http-nio-8080-exec-8] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:01:44.319  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : RequestLog : RequestLog{url='http://localhost:8080/dev/friend/hottest', ip='0:0:0:0:0:0:0:1', classMethod='com.jxufe.web.FriendController.friendHottest', args=[org.apache.catalina.session.StandardSessionFacade@3df00a3d]}
2024-03-31 21:01:44.319 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==>  Preparing: SELECT u.id user_id, u.username, u.nickname, u.avatar, u.description FROM t_user AS u JOIN (SELECT LEAST(sender_username, recipient_username) AS user1, GREATEST(sender_username, recipient_username) AS user2, COUNT(*) AS chat_count FROM (SELECT * FROM t_chat UNION ALL SELECT * FROM t_chat WHERE sender_username = recipient_username) AS combined_chats WHERE sender_username = ? OR recipient_username = ? GROUP BY user1, user2 ORDER BY chat_count DESC LIMIT 1) AS c WHERE IF (c.user1 = ?, c.user2 = u.username, c.user1 = u.username)
2024-03-31 21:01:44.321 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : ==> Parameters: hyf(String), hyf(String), hyf(String)
2024-03-31 21:01:44.323 DEBUG 32748 --- [http-nio-8080-exec-4] c.jxufe.dao.FriendMapper.friendHottest   : <==      Total: 1
2024-03-31 21:01:44.323  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : method : FriendVO(userId=2, username=xhc, avatar=https://sky-take-out-kafka.oss-cn-beijing.aliyuncs.com/picture_9.jpg, description=大家好，我是小熊维尼，一只来自百亩森林的快乐小熊。我身穿红色的小背心，头上戴着一顶可爱的蜜黄色帽子，标志性的大肚子总是让人忍不住想抱一抱。我热爱生活，对世界充满好奇，每一天都过得甜蜜而充实。我的好朋友有屹耳、跳跳虎、小猪皮杰等，我们一同探索森林里的奇妙，分享蜂蜜的甜美，共同面对生活的小小挑战。, nickname=小熊维尼)
2024-03-31 21:01:44.323  INFO 32748 --- [http-nio-8080-exec-4] com.jxufe.aspect.LogAspect               : ------------doAfter-----------
2024-03-31 21:04:58.944  INFO 32748 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-31 21:04:58.947  INFO 32748 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-03-31 21:04:58.959  INFO 32748 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
